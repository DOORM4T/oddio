(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{23:function(e,t,n){e.exports={carousel:"Carousel_carousel__38UAp",item:"Carousel_item__2kFON",navbutton:"Carousel_navbutton__1uNAH"}},24:function(e,t,n){e.exports={soundboard:"Soundboards_soundboard__kPJCc",dropdown:"Soundboards_dropdown__28vX2",expanded:"Soundboards_expanded__2Z7w7",deletebutton:"Soundboards_deletebutton__1uExL"}},25:function(e,t,n){e.exports={section:"Catalog_section__1Umir",catalog:"Catalog_catalog__2JjHj",item:"Catalog_item__QHgmg",empty:"Catalog_empty__3P4xo"}},28:function(e,t,n){e.exports={header:"Header_header__2EBHc",navbar:"Header_navbar__ezcUQ",loggedinmessage:"Header_loggedinmessage__1PwVY"}},32:function(e,t,n){e.exports={form:"Form_form__jEj4E",errorMessage:"Form_errorMessage__3GAvh"}},40:function(e,t,n){e.exports={searchbar:"SearchBar_searchbar__2yPa3"}},41:function(e,t,n){e.exports={addToSoundboardForm:"AddToSoundboard_addToSoundboardForm__379RA"}},42:function(e,t,n){e.exports={button:"Button_button__CHx-W"}},43:function(e,t,n){e.exports={footer:"Footer_footer__y2XXR"}},45:function(e,t,n){e.exports={soundplayer:"Soundplayer_soundplayer__3LRdk"}},48:function(e,t,n){e.exports=n(65)},55:function(e,t,n){},65:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(37),c=n(9),l=Object(a.createContext)({globalState:null,dispatch:null}),u=n(8),s={user:{_id:"",email:"",joined:"",private:!0,sounds:[],soundboards:[],soundsFamed:[],username:""},ui:{theme:"default",alert:"nothing"},soundsQuery:"",soundsToLivePlay:[],showModal:!1,editingDashboard:!1},i=function(e,t){var n=t.type,a=t.payload;switch(n){case"SET_USER":return Object(u.a)(Object(u.a)({},e),{},{user:a});case"LOGOUT_USER":return Object(u.a)(Object(u.a)({},e),{},{user:{_id:"",username:"",soundsFamed:[],sounds:[],private:!0,email:"",joined:""}});case"SET_ALERT":return Object(u.a)(Object(u.a)({},e),{},{ui:Object(u.a)(Object(u.a)({},e.ui),{},{alert:a})});case"CHANGE_THEME":return Object(u.a)(Object(u.a)({},e),{},{ui:Object(u.a)(Object(u.a)({},e.ui),{},{theme:a})});case"SET_SOUNDS_QUERY":return Object(u.a)(Object(u.a)({},e),{},{soundsQuery:a});case"SET_SOUNDS_TO_LIVE_PLAY":return Object(u.a)(Object(u.a)({},e),{},{soundsToLivePlay:a});case"SET_MODAL_VISIBILITY":return Object(u.a)(Object(u.a)({},e),{},{showModal:a});case"TOGGLE_EDITING_DASHBOARD":return Object(u.a)(Object(u.a)({},e),{},{editingDashboard:!e.editingDashboard});default:throw new Error}},d=n(12),m=n(10),p=n(38),f=n.n(p);n(53),n(54),n(55);function b(e){var t=e.spaces;return r.a.createElement(r.a.Fragment,null,new Array(t).fill(null).map((function(e,t){return r.a.createElement("br",{key:"space-".concat(t)})})))}var h=n(28),E=n.n(h);function v(e){return{type:"SET_USER",payload:e}}function g(e){var t=e.title,n=e.icon,o=Object(a.useContext)(l),c=o.globalState,u=o.dispatch,s=null===c||void 0===c?void 0:c.user.username,i=Object(m.f)();return r.a.createElement("header",{className:E.a.header},r.a.createElement("div",{className:E.a.loggedinmessage},s&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{"data-aos":"fade"},"Hey there, ".concat(s,"!")),r.a.createElement("button",{onClick:function(){fetch("/auth/logout",{method:"DELETE"}).then((function(){console.log("logged out"),u&&u({type:"LOGOUT_USER",payload:null}),i.push("/login")}))},"data-aos":"fade"},s&&"Logout"))),r.a.createElement("div",{className:E.a.navbar},r.a.createElement("h1",{id:"title","data-aos":"zoom-out"},t," ",r.a.createElement("span",{role:"img","aria-label":"Header Icon"},n)),r.a.createElement(y,null)))}function y(){return r.a.createElement("nav",{id:"navigation","data-aos":"fade"},[{to:"/",icon:"\ud83c\udfe0"},{to:"/catalog",icon:"\ud83d\udcc7"},{to:"/dashboard",icon:"\ud83d\udc64"},{to:"/",icon:"\u2699"}].map((function(e,t){var n=e.to,a=e.icon;return r.a.createElement(x,{to:n,icon:a,key:"nav-link-to-".concat(n,"-").concat(t)})})))}function x(e){var t=e.to,n=e.icon;return r.a.createElement(d.b,{to:t},r.a.createElement("button",null," ",r.a.createElement("span",{role:"img","aria-label":"Header Navigation Icon"},n)))}var j=n(40),O=n.n(j);function w(){var e=Object(a.useContext)(l),t=e.globalState,n=e.dispatch,o=Object(m.f)();return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),o.push("/catalog")},className:O.a.searchbar},r.a.createElement("input",{onChange:function(e){n&&n({type:"SET_SOUNDS_QUERY",payload:e.target.value})},type:"text",placeholder:"Search",value:null===t||void 0===t?void 0:t.soundsQuery}),r.a.createElement("button",{type:"submit"},r.a.createElement("span",{role:"img","aria-label":"search"},"\ud83d\udd0d")))}var S=n(4),_=n.n(S),k=n(7),C=n(23),T=n.n(C),N=n(46);function D(e){var t=e.items;return Object(a.useEffect)((function(){new N.a(".swiper-container",{effect:"slide",grabCursor:!0,centeredSlides:!0,slidesPerView:3,breakpoints:{320:{slidesPerView:1,spaceBetween:20},480:{slidesPerView:2,spaceBetween:30},640:{slidesPerView:3,spaceBetween:40},960:{slidesPerView:6,spaceBetween:40}},pagination:{el:".swiper-pagination"},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}})}),[t]),r.a.createElement("section",{className:"".concat(T.a.carousel," swiper-container")},r.a.createElement("div",{className:"swiper-wrapper"},t.map((function(e,t){return r.a.createElement("div",{className:"".concat(T.a.item," swiper-slide"),key:"Item-".concat(t),"data-aos":"flip-down"},e)}))),r.a.createElement("div",{className:"swiper-button-prev ".concat(T.a.navbutton)}),r.a.createElement("div",{className:"swiper-button-next ".concat(T.a.navbutton)}),r.a.createElement("div",{className:"swiper-pagination"}))}function A(e){return L.apply(this,arguments)}function L(){return(L=Object(k.a)(_.a.mark((function e(t){var n,a,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("api/sounds/uploads/".concat(t),{headers:{"Content-Type":"audio/mpeg"}});case 2:return n=e.sent,e.next=5,n.blob();case 5:a=e.sent,(r=new FileReader).onloadend=function(e){var t;new Audio(null===(t=r.result)||void 0===t?void 0:t.toString()).play()},r.readAsDataURL(a);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){var e=Object(a.useContext)(l),t=e.globalState,n=e.dispatch,r=null===t||void 0===t?void 0:t.user.username;return function(){var e=Object(k.a)(_.a.mark((function e(){var t,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/users/".concat(r));case 2:return t=e.sent,e.next=5,t.json();case 5:if((a=e.sent)&&200===t.status&&n){e.next=8;break}return e.abrupt("return");case 8:n(v(a));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}var I=n(41),U=n.n(I);function R(e){var t=e.soundId,n=Object(a.useContext)(l),o=n.globalState,u=(n.dispatch,Object(a.useState)("")),s=Object(c.a)(u,2),i=s[0],d=s[1],m=P(),p=function(){var e=Object(k.a)(_.a.mark((function e(n){var a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),i){e.next=3;break}return e.abrupt("return");case 3:return a=JSON.stringify({soundId:t}),e.next=6,fetch("/api/users/".concat(null===o||void 0===o?void 0:o.user.username,"/soundboards/").concat(i,"/addsound"),{method:"PUT",body:a,headers:{"Content-Type":"application/json"}});case 6:200===e.sent.status&&m();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("form",{onSubmit:p,className:U.a.addToSoundboardForm},r.a.createElement("select",{name:"soundboard-select",id:"soundboard-select",required:!0,onChange:function(e){d(e.target.value)},defaultValue:""},r.a.createElement("option",{disabled:!0,value:""},"- Choose a Soundboard -"),(null===o||void 0===o?void 0:o.user)&&(null===o||void 0===o?void 0:o.user.soundboards)&&(null===o||void 0===o?void 0:o.user.soundboards.map((function(e){var t=e._id,n=e.name;return r.a.createElement("option",{value:t,key:t},n)})))),r.a.createElement("button",{type:"submit"},r.a.createElement("span",{role:"img,","aria-label":"Add to Soundboard"},"\u2795")))}function F(e){var t=e.query,n=void 0===t?"":t,o=e.list,u=void 0===o?[]:o,s=e.showCreatorActions,i=void 0!==s&&s,d=e.showAddToSoundboard,m=void 0!==d&&d,p=P(),f=Object(a.useContext)(l),b=f.globalState,h=f.dispatch,E=Object(a.useState)([]),v=Object(c.a)(E,2),g=v[0],y=v[1];function x(e){var t=e.name,n=e._id;return Object(k.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Delete sound: ".concat(t.toUpperCase(),"?"))){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,fetch("/api/sounds/".concat(n),{method:"DELETE"});case 5:200===e.sent.status&&p();case 7:case"end":return e.stop()}}),e)})))}return Object(a.useEffect)((function(){function e(){return(e=Object(k.a)(_.a.mark((function e(){var t,a,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u.length>0&&(t=u.map((function(e){return fetch("/api/sounds/".concat(e))})),Promise.all(t).then((function(e){return Promise.all(e.map((function(e){return e.json()})))})).then((function(e){y((function(){return e}))}))),e.next=4,fetch("/api/sounds?".concat(n));case 4:return a=e.sent,e.next=7,a.json();case 7:if(null!==(r=e.sent)){e.next=10;break}throw new Error("Failed to fetch sounds.");case 10:y((function(){return r})),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(0),console.error(e.t0.message),e.abrupt("return",[]);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}h&&(u.length>0&&n||function(){e.apply(this,arguments)}())}),[null===b||void 0===b?void 0:b.user.sounds]),r.a.createElement(r.a.Fragment,null,r.a.createElement(D,{items:g.map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,e.name),r.a.createElement("p",null,e.author),m&&r.a.createElement(R,{soundId:e._id}),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){return A(e.sourceId)}},r.a.createElement("span",{role:"img","aria-label":"play sound"},"\ud83d\udd0a")),i&&(null===b||void 0===b?void 0:b.user.username)===e.author&&r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:x(e)},r.a.createElement("span",{role:"img","aria-label":"delete sound"},"\u274c")))))}))}))}var q=n(16),H=n(42),M=n.n(H);function z(e){var t=e.color,n=void 0===t?"":t,a=e.children,o=e.type,c=void 0===o?"button":o,l=e.onClick;return r.a.createElement("button",{className:M.a.button,style:Object(q.a)({},n?"backgroundColor":"",n),type:c,onClick:l},a)}var G=n(43),B=n.n(G);function Q(){return r.a.createElement("footer",{className:B.a.footer},r.a.createElement("span",null,"Made with"," ",r.a.createElement("span",{role:"img","aria-label":"heart"},"\ud83d\udc96")," ","by Mat Seto"))}function V(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(a.useContext)(l),n=t.dispatch,r=Object(m.f)();Object(a.useEffect)((function(){if(n){var t=document.cookie.slice("user=".length);if(t)(function(){var o=Object(k.a)(_.a.mark((function o(){var c,l;return _.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,fetch("/api/users/".concat(t));case 2:return c=o.sent,o.next=5,c.json();case 5:l=o.sent,200===c.status&&l||a(),n(v(l)),e&&r.push("/dashboard");case 9:case"end":return o.stop()}}),o)})));return function(){return o.apply(this,arguments)}})()();else e&&a()}function a(){return o.apply(this,arguments)}function o(){return(o=Object(k.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.push("/login"),n&&n({type:"LOGOUT_USER",payload:null}),!t){e.next=5;break}return e.next=5,fetch("/auth/logout",{method:"DELETE"});case 5:return e.abrupt("return");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),[])}function J(){return V(),r.a.createElement("article",null,r.a.createElement(g,{title:"SoundBird",icon:"\ud83d\udc26"}),r.a.createElement("main",null,r.a.createElement(b,{spaces:2}),r.a.createElement(w,null),r.a.createElement(b,{spaces:1}),r.a.createElement(F,null),r.a.createElement(b,{spaces:5}),r.a.createElement("div",{"data-aos":"fade"},r.a.createElement(d.b,{to:"/login"},r.a.createElement(z,null,"Get Started")))),r.a.createElement(Q,null))}var W=n(32),Y=n.n(W);function $(e){var t=e.action,n=e.method,o=e.fields,l=e.submitText,s=e.formIsValid,i=e.redirect,d=e.customBodyFromMultipartData,p=Object(a.useState)(Object.fromEntries(o.map((function(e){return[e.name,""]})))),f=Object(c.a)(p,2),h=f[0],E=f[1],v=Object(a.useState)(""),g=Object(c.a)(v,2),y=g[0],x=g[1],j=Object(m.f)(),O=Object(a.useRef)(null),w=Object(a.useRef)(null),S=P(),C=function(e){var t=e.target,n=t.name,a=t.value;s&&!s(O,h)||E((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(q.a)({},n,a))}))},T=function(){var e=Object(k.a)(_.a.mark((function e(a){var r,o;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a.preventDefault(),!d){e.next=9;break}return r=d(h,w.current.files),e.next=6,fetch(t,{method:n,body:r});case 6:o=e.sent,e.next=13;break;case 9:return r=JSON.stringify(h),e.next=12,fetch(t,{method:n,body:r,headers:{"Content-Type":"application/json"}});case 12:o=e.sent;case 13:return e.next=15,o.json();case 15:e.sent,200===o.status&&(O.current.reset(),i?j.push(i):S()),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),x((function(){return"Invalid input."}));case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("form",{action:t,method:n,className:Y.a.form,onSubmit:T,ref:O},o.map((function(e,t){var n=e.name,a=e.placeholder,o=e.type,c=e.options,l=e.accept,u=e.pattern,s=e.invalidTitle,i=e.required;return r.a.createElement("div",{key:"".concat(n,"-").concat(o,"-").concat(t)},"select"===o?r.a.createElement("select",{onChange:C,id:n,name:n,placeholder:a,required:i},null===c||void 0===c?void 0:c.map((function(e,t){return r.a.createElement("option",{value:e,key:"".concat(e,"-").concat(t)},e)}))):"textarea"===o?r.a.createElement("textarea",{id:n,name:n,placeholder:a,onChange:C,maxLength:300,required:i}):"file"===o?r.a.createElement("input",{id:n,name:n,type:"file",accept:l,ref:w,pattern:u,title:s,required:i}):r.a.createElement("input",{id:n,name:n,type:o,placeholder:a,onChange:C,pattern:u,title:s,required:i}),r.a.createElement("label",{htmlFor:n},a))})),r.a.createElement("p",{className:Y.a.errorMessage},y),r.a.createElement(b,{spaces:2}),r.a.createElement(z,{type:"submit"},l))}function Z(){var e=Object(a.useContext)(l).globalState,t=null===e||void 0===e?void 0:e.user.username,n=Object(m.f)();Object(a.useEffect)((function(){t&&n.push("/dashboard")}),[]);return r.a.createElement($,{action:"/auth/login",fields:[{name:"email",placeholder:"email",type:"email",required:!0},{name:"password",placeholder:"password",type:"password",required:!0}],method:"POST",submitText:"Login",redirect:"/dashboard"})}var X=n(44);n(61);function K(){V(!0);var e=new X.a.auth.GoogleAuthProvider,t=function(){var t=Object(k.a)(_.a.mark((function t(){var n,a,r,o,c,l,u;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,we.signInWithPopup(e);case 3:if((n=t.sent).user&&we.currentUser){t.next=6;break}throw new Error("User details unavailable.");case 6:return a=n.user.email,t.next=9,we.currentUser.getIdToken();case 9:return r=t.sent,t.next=12,fetch("/api/users/email/".concat(a));case 12:return o=t.sent,t.next=15,o.json();case 15:if(c=t.sent.result,l={firebaseAuthToken:r,email:a,displayName:""},c){t.next=23;break}if(console.log("Prompting"),l.displayName=prompt("Complete Your registration: Enter Display Name:")||"",l.displayName){t.next=23;break}return console.error("Failed registration."),t.abrupt("return");case 23:return u=JSON.stringify(l),"/auth/register","POST",t.next=28,fetch("/auth/register",{method:"POST",body:u,headers:{"Content-Type":"application/json"}});case 28:if(200===t.sent.status){t.next=31;break}throw new Error("Failed to create new account with Google");case 31:window.location.reload(),t.next=39;break;case 34:return t.prev=34,t.t0=t.catch(0),console.error(t.t0),t.next=39,we.signOut();case 39:case"end":return t.stop()}}),t,null,[[0,34]])})));return function(){return t.apply(this,arguments)}}();return r.a.createElement(z,{onClick:t},"Sign in with Google")}function ee(){return r.a.createElement("article",null,r.a.createElement(g,{title:"Login",icon:"\ud83d\udd10"}),r.a.createElement("h1",{style:{textAlign:"center"}},"Welcome back!"),r.a.createElement(Z,null),r.a.createElement("div",{style:te},r.a.createElement("p",{style:{marginRight:"1rem"}},"Don't have an account?"),r.a.createElement(d.b,{to:"/register",style:{fontWeight:"bolder",color:"black"}},"Register")),r.a.createElement("div",{style:{textAlign:"center",marginTop:"2rem",fontSize:"2rem"}},"or..."),r.a.createElement(K,null))}var te={width:"100%",display:"flex",justifyContent:"center",alignItems:"center",marginTop:"1rem",fontSize:"1.2rem"},ne=n(19);function ae(){return r.a.createElement($,{action:"/auth/register",fields:[{name:"username",placeholder:"username",type:"username",pattern:"^[\\w\\d_]{3,30}$",invalidTitle:"3-30 letters and numbers, no special characters except '_'",required:!0},{name:"email",placeholder:"email",type:"email",required:!0},{name:"confirmEmail",placeholder:"confirm email",type:"email",required:!0},{name:"password",placeholder:"password",type:"password",pattern:"^(?=.*[A-Z])(?=.*[a-z])(?=.*[!@#$%^&*])[A-Za-z0-9!@#$%^&]{6,100}$",required:!0},{name:"confirmPassword",placeholder:"confirm password",type:"password",pattern:"^(?=.*[A-Z])(?=.*[a-z])(?=.*[!@#$%^&*])[A-Za-z0-9!@#$%^&]{6,100}$",required:!0}],method:"POST",submitText:"Create Account",formIsValid:function(e,t){t.email,t.confirmEmail,t.password,t.confirmPassword;var n=Object(ne.a)(e.current.querySelectorAll("input"));return a(n[1],n[2],"Email"),a(n[3],n[4],"Password"),!0;function a(e,t,n){e.value!==t.value?(t.title="".concat(n," and Confirm ").concat(n," fields do not match"),t.pattern=""):(t.title="",t.pattern=".*")}},redirect:"/login"})}function re(){return r.a.createElement("article",null,r.a.createElement(g,{title:"Register",icon:"\ud83d\udd10"}),r.a.createElement(b,{spaces:1}),r.a.createElement(ae,null),r.a.createElement("div",{style:oe},r.a.createElement("p",{style:{marginRight:"1rem"}},"Already have an account?"),r.a.createElement(d.b,{to:"/login",style:{fontWeight:"bolder",color:"black"}},"Login")))}var oe={width:"100%",display:"flex",justifyContent:"center",alignItems:"center",marginTop:"1rem",fontSize:"1.2rem"};function ce(){return r.a.createElement($,{action:"/api/sounds/add",fields:[{name:"category",placeholder:"category",type:"select",options:["Miscellaneous","Creature","Item","Spell","Weapon"]},{name:"name",placeholder:"name",type:"text",required:!0},{name:"triggers",placeholder:"triggers",type:"text"},{name:"description",placeholder:"description",type:"textarea"},{name:"uploadedSound",placeholder:"sound upload",type:"file",accept:"audio/*",required:!0}],method:"POST",submitText:"Upload",customBodyFromMultipartData:function(e,t){e.category||(e.category="Miscellaneous");var n=new FormData;return Object.keys(e).forEach((function(t){n.append(t,e[t])})),n.append("uploadedSound",t[0]),n}})}var le=[{name:"soundboardName",placeholder:"name",type:"text",required:!0}];function ue(){var e=Object(a.useContext)(l).globalState,t=null===e||void 0===e?void 0:e.user.username;return r.a.createElement($,{action:"/api/users/".concat(t,"/soundboards/create"),method:"POST",fields:le,submitText:"Create Soundboard"})}var se=n(24),ie=n.n(se);function de(e){var t=e.icon;return r.a.createElement("div",{className:"spinner"},r.a.createElement("span",{role:"img","aria-label":"spinner"},t))}function me(){var e=P(),t=Object(a.useContext)(l),n=t.globalState,o=t.dispatch,u=null===n||void 0===n?void 0:n.user.soundboards,s=Object(a.useState)([]),i=Object(c.a)(s,2),d=i[0],m=i[1],p=Object(a.useState)(!0),f=Object(c.a)(p,2),b=f[0],h=f[1];Object(a.useEffect)((function(){u&&0!==u.length&&(h(!0),u.forEach((function(e){if(e.sounds&&0!==e.sounds.length){var t=e.sounds.map((function(e){return fetch("/api/sounds/".concat(e),{headers:{"Content-Type":"application/json"}})}));Promise.all(t).then((function(e){return Promise.all(e.map((function(e){return e.json()})))})).then((function(t){m((function(n){return[].concat(Object(ne.a)(n.filter((function(t){return t.soundboardName!==e.name}))),[{soundboardName:e.name,sounds:t}])}))}))}})),h(!1))}),[u]);var E=function(t){var a=t.name,r=t._id;return Object(k.a)(_.a.mark((function t(){var o;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(window.confirm("Delete soundboard: ".concat(a.toUpperCase(),"?"))){t.next=3;break}return t.abrupt("return");case 3:return o="/api/users/".concat(null===n||void 0===n?void 0:n.user.username,"/soundboards/").concat(r,"/deletesoundboard"),t.next=6,fetch(o,{method:"DELETE",headers:{"Content-Type":"application/json"}});case 6:200===t.sent.status&&e();case 8:case"end":return t.stop()}}),t)})))};return r.a.createElement("section",null,!b&&u?u.map((function(e){return r.a.createElement("div",{className:ie.a.soundboard,key:e._id,"data-aos":"fade-right"},(null===n||void 0===n?void 0:n.editingDashboard)&&r.a.createElement("button",{onClick:E(e),className:ie.a.deletebutton},r.a.createElement("span",{role:"img","aria-label":"Delete Soundboard"},"\u274c")),r.a.createElement("button",{onClick:(t=e.sounds,function(){var e=t.map((function(e){return fetch("/api/sounds/".concat(e))}));Promise.all(e).then((function(e){return Promise.all(e.map((function(e){return e.json()})))})).then((function(e){o&&o({type:"SET_SOUNDS_TO_LIVE_PLAY",payload:e})}))})},r.a.createElement("span",{role:"img","aria-label":"Live play"},"\ud83d\udc42")),r.a.createElement("button",{onClick:function(e){e.target.classList.toggle(ie.a.expanded)},className:ie.a.dropdown},r.a.createElement("span",null,e.sounds.length),e.name),r.a.createElement("div",null,e.sounds.length>0?function(e,t,n){var o=P(),c=Object(a.useContext)(l).globalState,u=e.find((function(e){return e.soundboardName===t.name})),s=null===n||void 0===n?void 0:n.username;if(!u||!s)return null;return r.a.createElement(D,{items:u.sounds.map((function(e,n){return r.a.createElement("li",{key:"".concat(t.name,"-list-item-").concat(e._id,"-").concat(n)},r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("p",null,e.name),r.a.createElement("p",null,"Author: ",e.author),r.a.createElement("p",null,"Category: ",e.category),r.a.createElement("p",null,"Created: ",new Date(e.created).toDateString()),r.a.createElement("p",null,e.description),r.a.createElement("p",null,"Fame: ",e.fame),e.triggers.length>0?r.a.createElement("p",null,e.triggers.join(", ")):null),r.a.createElement("div",{style:{display:"flex",width:"100%",justifyContent:"center"}},r.a.createElement("button",{onClick:function(){return A(e.sourceId)}},r.a.createElement("span",{role:"img","aria-label":"Play sound"},"\ud83d\udd0a")),(null===c||void 0===c?void 0:c.editingDashboard)&&r.a.createElement("button",{onClick:(a=e._id,Object(k.a)(_.a.mark((function e(){var n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Delete sound from soundboard?")){e.next=3;break}return e.abrupt("return");case 3:return n=JSON.stringify({soundId:a}),e.next=6,fetch("/api/users/".concat(s,"/soundboards/").concat(t._id,"/deletesound"),{method:"DELETE",body:n,headers:{"Content-Type":"application/json"}});case 6:200===e.sent.status&&o();case 8:case"end":return e.stop()}}),e)}))))},r.a.createElement("span",{role:"img","aria-label":"Remove from soundboard"},"\u274c")))));var a}))})}(d,e,null===n||void 0===n?void 0:n.user):r.a.createElement("p",null,"There's nothing here... yet!")));var t})):r.a.createElement(de,{icon:"\ud83d\udc27"}))}function pe(){V(!0);var e=Object(a.useContext)(l).globalState;return(null===e||void 0===e?void 0:e.user)?r.a.createElement(r.a.Fragment,null,r.a.createElement("article",null,r.a.createElement(g,{title:"Dashboard",icon:"\ud83d\udc64"}),r.a.createElement("section",null,r.a.createElement("h1",null,"My Soundboards"),r.a.createElement(me,null),r.a.createElement(ue,null)),r.a.createElement(b,{spaces:5}),r.a.createElement("hr",null),r.a.createElement(b,{spaces:2}),r.a.createElement("section",null,r.a.createElement("h1",null,"My Sounds"),e.user.username&&r.a.createElement(F,{query:"author=".concat(e.user.username),showCreatorActions:e.editingDashboard,showAddToSoundboard:!0})),r.a.createElement(b,{spaces:2}),r.a.createElement("section",null,r.a.createElement("h1",null,"Favorites"),e.user.soundsFamed.length>0&&r.a.createElement(F,{list:e.user.soundsFamed,showAddToSoundboard:!0})),r.a.createElement(b,{spaces:5}),r.a.createElement("hr",null),r.a.createElement(b,{spaces:5}),r.a.createElement("section",null,r.a.createElement("h1",{id:"upload",style:{textAlign:"center"}},"Upload a Sound"),r.a.createElement(b,{spaces:2}),r.a.createElement(ce,null)),r.a.createElement(b,{spaces:2})),r.a.createElement(fe,null)):null}function fe(){var e=Object(a.useContext)(l),t=e.globalState,n=e.dispatch;if(!n||!t)return null;return r.a.createElement("button",{onClick:function(){n({type:"TOGGLE_EDITING_DASHBOARD",payload:null})},style:{bottom:"1rem",right:"7rem",position:"fixed",width:"50px",height:"50px",boxShadow:"0 4px 4px black",color:"white",backgroundColor:"royalblue",fontSize:"2rem",zIndex:9999,display:"flex",justifyContent:"center"}},r.a.createElement("span",{role:"img","aria-label":"edit"},"\u270f"))}var be=n(25),he=n.n(be);function Ee(e){var t=e.soundId,n=e.fame,o=Object(a.useState)(n),l=Object(c.a)(o,2),u=l[0],s=l[1],i=function(){var e=Object(k.a)(_.a.mark((function e(n){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/sounds/".concat(t,"/incrementfame"),{method:"PUT"});case 3:if(200!==e.sent.status){e.next=8;break}s((function(e){return e+1})),e.next=14;break;case 8:return e.next=10,fetch("/api/sounds/".concat(t,"/decrementfame"),{method:"PUT"});case 10:if(200===e.sent.status){e.next=13;break}throw new Error;case 13:s((function(e){return e-1}));case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.log("Failed to change famed status.");case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("span",null,u),r.a.createElement("button",{onClick:i},r.a.createElement("span",{role:"img","aria-label":"fame"},"\u2b06")))}function ve(e){var t=e.sounds,n=Object(a.useContext)(l).globalState;return r.a.createElement("section",{className:he.a.section},t.length>0?r.a.createElement("ul",{className:he.a.catalog},t.map((function(e){return r.a.createElement("div",{className:he.a.item,key:e._id,"data-aos":"zoom-in","data-aos-duration":500},r.a.createElement("h2",null,e.name),r.a.createElement("h4",null,e.author),r.a.createElement("p",null,e.description),r.a.createElement("p",null,e.category),r.a.createElement("p",null,e.triggers.length?"\ud83d\udc44":"",e.triggers.join(", ")),r.a.createElement("p",null,new Date(e.created).toLocaleDateString()),(null===n||void 0===n?void 0:n.user.username)&&r.a.createElement(r.a.Fragment,null,r.a.createElement(R,{soundId:e._id}),r.a.createElement(Ee,{soundId:e._id,fame:e.fame})),r.a.createElement("button",{onClick:function(){return A(e.sourceId)}},"\ud83d\udd0a"))}))):r.a.createElement("h3",{className:he.a.empty},"Looks like there's nothing here... yet!"))}function ge(e){var t=e.query,n=void 0===t?"":t,o=Object(a.useState)([]),u=Object(c.a)(o,2),s=u[0],i=u[1],d=Object(a.useContext)(l).globalState,m=Object(a.useState)(10),p=Object(c.a)(m,2),f=p[0],b=(p[1],Object(a.useState)(0)),h=Object(c.a)(b,2),E=h[0],v=h[1],g=Object(a.useState)(!0),y=Object(c.a)(g,2),x=y[0],j=y[1];Object(a.useEffect)((function(){(function(){var e=Object(k.a)(_.a.mark((function e(){var t,a,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/sounds?start=".concat(E,"&count=").concat(f,"&name=").concat(n||(null===d||void 0===d?void 0:d.soundsQuery)));case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,n||(null===d||void 0===d?void 0:d.soundsQuery)?i(a):i((function(e){return[].concat(Object(ne.a)(e),Object(ne.a)(a))})),e.next=9,fetch("/api/sounds?start=".concat(E+f,"&count=").concat(f,"&name=").concat(n||(null===d||void 0===d?void 0:d.soundsQuery)));case 9:return r=e.sent,e.next=12,r.json();case 12:if(0!==e.sent.length){e.next=16;break}return j(!1),e.abrupt("return");case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[n,null===d||void 0===d?void 0:d.soundsQuery,E]),Object(a.useEffect)((function(){v(0),j(!0)}),[null===d||void 0===d?void 0:d.soundsQuery]);return r.a.createElement("div",null,r.a.createElement(ve,{sounds:s}),s.length>0&&x&&r.a.createElement("button",{onClick:function(){v((function(){return E+f}))},style:{width:"100%",backgroundColor:"#222",color:"white",height:"50px"}},"Load More"))}function ye(){return V(),r.a.createElement("article",null,r.a.createElement(g,{title:"Catalog",icon:"\ud83d\udcc7"}),r.a.createElement("main",null,r.a.createElement("div",null,r.a.createElement("div",{style:{position:"sticky",top:0,backgroundColor:"#fcfcfc",padding:"1rem",boxShadow:"0 16px 8px rgba(0,0,0,0.5)",borderRadius:"0 0 4px 4px",zIndex:99},id:"TheWholeLot"},r.a.createElement("h1",{style:{textAlign:"center"}},"The Whole Lot"),r.a.createElement(w,null)),r.a.createElement(ge,null))))}var xe=n(45),je=n.n(xe);function Oe(){var e=Object(a.useContext)(l),t=e.globalState,n=(e.dispatch,Object(a.useState)([])),o=Object(c.a)(n,2),u=(o[0],o[1]),s=Object(a.useState)(),i=Object(c.a)(s,2),d=i[0],m=i[1],p=Object(a.useState)(!1),f=Object(c.a)(p,2),b=f[0],h=f[1],E=Object(a.useRef)(null);return Object(a.useEffect)((function(){m((function(){var e=new(window.SpeechRecognition||window.webkitSpeechRecognition);return e.continuous=!0,e.onstart=function(){console.log("start")},e.onend=function(){console.log("end")},e}))}),[]),Object(a.useEffect)((function(){d&&(d.abort(),b&&d.start())}),[b]),Object(a.useEffect)((function(){d&&t&&u((function(){var e=[];return t.soundsToLivePlay.length>0&&(e=(e=t.soundsToLivePlay.map((function(e){return e.triggers})).flat(1/0)).map((function(e){return e.toUpperCase()}))),d.onresult=function(n){if(0!==e.length){var a=n.results[n.results.length-1][0].transcript;console.log(a);var r=new RegExp("(".concat(e.join("|"),")"),"i");a.split(" ").forEach(function(){var e=Object(k.a)(_.a.mark((function e(n){var a,o,c,l;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=n.toUpperCase(),!r.test(n)){e.next=14;break}if(a=t.soundsToLivePlay.find((function(e){return e.triggers.map((function(e){return e.toUpperCase()})).includes(n)}))){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,fetch("/api/sounds/uploads/".concat(a.sourceId));case 7:return o=e.sent,e.next=10,o.blob();case 10:c=e.sent,(l=new FileReader).onloadend=function(){if(l.result){var e=l.result.toString();new Audio(e).play()}},l.readAsDataURL(c);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},e}))}),[null===t||void 0===t?void 0:t.soundsToLivePlay]),r.a.createElement("div",{className:je.a.soundplayer},r.a.createElement("button",{onClick:function(){h((function(e){return E.current?(E.current.style.filter=!1===e?"hue-rotate(150deg) brightness(180%)":"none",!e):!e}))},ref:E},r.a.createElement("span",{role:"img","aria-label":"live play"},"\ud83d\udd34")))}var we=n(47).a.initializeApp({apiKey:"AIzaSyARhiq8bCSDSXEcl3RLHtC2uQbprI6U854",authDomain:"soundbird-63117.firebaseapp.com",databaseURL:"https://soundbird-63117.firebaseio.com",projectId:"soundbird-63117",storageBucket:"soundbird-63117.appspot.com",messagingSenderId:"263610642754",appId:"1:263610642754:web:04c694294a4ad2d4cb98db"}).auth();function Se(){var e=Object(a.useReducer)(i,s),t=Object(c.a)(e,2),n=t[0],o=t[1];return Object(a.useEffect)((function(){f.a.init({once:!0,duration:800,easing:"ease-out"})}),[]),r.a.createElement(l.Provider,{value:{globalState:n,dispatch:o}},r.a.createElement(Oe,null),r.a.createElement(d.a,null,r.a.createElement(m.c,null,r.a.createElement(m.a,{exact:!0,path:"/",render:function(){return r.a.createElement(J,null)}}),r.a.createElement(m.a,{path:"/catalog",render:function(){return r.a.createElement(ye,null)}}),r.a.createElement(m.a,{path:"/dashboard",render:function(){return r.a.createElement(pe,null)}}),r.a.createElement(m.a,{path:"/login",render:function(){return r.a.createElement(ee,null)}}),r.a.createElement(m.a,{path:"/register",render:function(){return r.a.createElement(re,null)}}),r.a.createElement(m.a,{path:"/*",render:function(){return r.a.createElement("div",null,"404")}}))))}Object(o.render)(r.a.createElement(Se,null),document.querySelector("#root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.353fafa0.chunk.js.map