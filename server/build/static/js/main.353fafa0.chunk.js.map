{"version":3,"sources":["components/Carousel/Carousel.module.scss","containers/SoundboardsCarouselContainer/Soundboards.module.scss","components/Catalog/Catalog.module.scss","components/Header/Header.module.scss","components/Form/Form.module.scss","components/SearchBar/SearchBar.module.scss","components/AddToSoundboard/AddToSoundboard.module.scss","components/Button/Button.module.scss","components/Footer/Footer.module.scss","components/SoundPlayer/Soundplayer.module.scss","context/globalContext.ts","context/globalReducer.ts","components/Spacing.tsx","context/globalActions.ts","components/Header/index.tsx","components/SearchBar/index.tsx","components/Carousel/index.tsx","util/playSound.ts","util/useRefreshUserData.tsx","components/AddToSoundboard/index.tsx","containers/SoundCarouselContainer.tsx","components/Button/index.tsx","components/Footer/index.tsx","util/useUserInfoFromCookie.tsx","pages/Home.tsx","components/Form/index.tsx","containers/LoginForm.tsx","containers/GoogleSignInButton.tsx","pages/Login.tsx","containers/RegisterForm.tsx","pages/Register.tsx","containers/AddSoundForm.tsx","containers/CreateSoundboardFormContainer.tsx","components/Spinner.tsx","containers/SoundboardsCarouselContainer/index.tsx","pages/Dashboard.tsx","components/FameButton/FameButton.tsx","components/Catalog/index.tsx","containers/SoundCatalogContainer.tsx","pages/SoundsCatalog.tsx","components/SoundPlayer/index.tsx","App.tsx","firebase.ts","index.tsx"],"names":["module","exports","GlobalContext","createContext","globalState","dispatch","initialGlobalState","user","_id","email","joined","private","sounds","soundboards","soundsFamed","username","ui","theme","alert","soundsQuery","soundsToLivePlay","showModal","editingDashboard","globalStateReducer","state","action","type","payload","Error","Spacing","spaces","Array","fill","map","item","index","key","setUserAction","userData","Header","title","icon","useContext","history","useHistory","className","styles","header","loggedinmessage","data-aos","onClick","fetch","method","then","console","log","push","navbar","id","role","aria-label","HeaderNav","to","HeaderLink","SearchBar","onSubmit","event","preventDefault","searchbar","onChange","target","value","placeholder","Catalog","items","useEffect","Swiper","effect","grabCursor","centeredSlides","slidesPerView","breakpoints","320","spaceBetween","480","640","960","pagination","el","navigation","nextEl","prevEl","carousel","navbutton","playSound","source_id","a","headers","response","blob","data","reader","FileReader","onloadend","e","Audio","result","toString","play","readAsDataURL","useRefreshUserData","json","status","AddToSoundboard","soundId","useState","selectedSoundboardId","setSelectedSoundboardId","refreshUserData","handleSubmit","body","JSON","stringify","addToSoundboardForm","name","required","defaultValue","disabled","SoundCatalogContainer","query","list","showCreatorActions","showAddToSoundboard","setSounds","deleteSound","window","confirm","toUpperCase","length","promises","Promise","all","responses","error","message","getSounds","sound","author","sourceId","Button","color","children","button","style","Footer","footer","useUserInfoFromCookie","enableRedirect","document","cookie","slice","logout","getUserData","Home","Form","fields","submitText","formIsValid","redirect","customBodyFromMultipartData","Object","fromEntries","formState","setFormState","errorMessage","setErrorMessage","formRef","useRef","fileRef","handleChange","prevState","current","files","reset","form","ref","options","accept","pattern","invalidTitle","option","maxLength","htmlFor","LoginForm","GoogleSignInButton","provider","firebase","auth","GoogleAuthProvider","googleSignIn","signInWithPopup","currentUser","getIdToken","firebaseAuthToken","isEmailRegisteredResponse","isEmailRegistered","displayName","prompt","bodyString","location","reload","signOut","Account","textAlign","toggleSectionStyles","marginRight","fontWeight","marginTop","fontSize","width","display","justifyContent","alignItems","RegisterForm","confirmEmail","password","confirmPassword","inputs","querySelectorAll","inputFieldsMatch","input1","input2","field","redirectStyles","AddSoundForm","formData","category","FormData","keys","forEach","append","CreateSoundboardFormContainer","Spinner","SoundBoards","soundboardSoundData","setSoundboardSoundData","isLoading","setIsLoading","soundboard","soundsDataPromises","prevSoundboardSoundData","filter","soundboardData","soundboardName","deleteSoundboard","route","soundBoard","deletebutton","soundboardSoundIds","soundPromises","classList","toggle","expanded","dropdown","userInfo","find","soundboardSounds","Date","created","toDateString","description","fame","triggers","join","SoundsList","Dashboard","EditButton","bottom","right","position","height","boxShadow","backgroundColor","zIndex","FameButton","displayedFame","setDisplayedFame","toggleFame","prevFame","section","catalog","data-aos-duration","toLocaleDateString","empty","count","start","setStart","moreToLoad","setMoreToLoad","prevData","nextResponse","fetchSounds","SoundsCatalog","top","padding","borderRadius","SoundPlayer","setTriggers","recognition","setRecognition","listening","setListening","buttonRef","rec","SpeechRecognition","webkitSpeechRecognition","continuous","onstart","onend","abort","flat","Infinity","triggerWord","onresult","ev","results","transcript","triggerWordsRegex","RegExp","split","word","test","soundToPlay","includes","dataUrl","soundplayer","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","App","useReducer","AOS","init","once","duration","easing","Provider","exact","path","render","querySelector"],"mappings":"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","file":"static/js/main.353fafa0.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"carousel\":\"Carousel_carousel__38UAp\",\"item\":\"Carousel_item__2kFON\",\"navbutton\":\"Carousel_navbutton__1uNAH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"soundboard\":\"Soundboards_soundboard__kPJCc\",\"dropdown\":\"Soundboards_dropdown__28vX2\",\"expanded\":\"Soundboards_expanded__2Z7w7\",\"deletebutton\":\"Soundboards_deletebutton__1uExL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"section\":\"Catalog_section__1Umir\",\"catalog\":\"Catalog_catalog__2JjHj\",\"item\":\"Catalog_item__QHgmg\",\"empty\":\"Catalog_empty__3P4xo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__2EBHc\",\"navbar\":\"Header_navbar__ezcUQ\",\"loggedinmessage\":\"Header_loggedinmessage__1PwVY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"Form_form__jEj4E\",\"errorMessage\":\"Form_errorMessage__3GAvh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchbar\":\"SearchBar_searchbar__2yPa3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"addToSoundboardForm\":\"AddToSoundboard_addToSoundboardForm__379RA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__CHx-W\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"footer\":\"Footer_footer__y2XXR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"soundplayer\":\"Soundplayer_soundplayer__3LRdk\"};","import { createContext, Dispatch } from 'react'\r\nimport { GlobalState } from './globalReducer'\r\nimport { GlobalStateAction } from './globalActions'\r\n\r\nexport const GlobalContext = createContext<GlobalContextInterface>({\r\n\tglobalState: null,\r\n\tdispatch: null,\r\n})\r\n\r\nexport interface GlobalContextInterface {\r\n\tglobalState: GlobalState | null\r\n\tdispatch: Dispatch<GlobalStateAction> | null\r\n}\r\n","import { GlobalStateAction } from './globalActions'\r\nimport { User } from '../util/types/User.type'\r\nimport { Sound } from '../util/types/Sound.type'\r\nimport { auth } from '../App'\r\n\r\nexport const initialGlobalState = {\r\n\tuser: {\r\n\t\t_id: '',\r\n\t\temail: '',\r\n\t\tjoined: '',\r\n\t\tprivate: true,\r\n\t\tsounds: [],\r\n\t\tsoundboards: [],\r\n\t\tsoundsFamed: [],\r\n\t\tusername: '',\r\n\t},\r\n\tui: {\r\n\t\ttheme: 'default',\r\n\t\talert: 'nothing',\r\n\t},\r\n\tsoundsQuery: '',\r\n\tsoundsToLivePlay: [],\r\n\tshowModal: false,\r\n\teditingDashboard: false,\r\n}\r\n\r\nexport const globalStateReducer = (\r\n\tstate: GlobalState,\r\n\taction: GlobalStateAction\r\n) => {\r\n\tconst { type, payload } = action\r\n\tswitch (type) {\r\n\t\tcase 'SET_USER':\r\n\t\t\treturn { ...state, user: payload }\r\n\t\tcase 'LOGOUT_USER':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tuser: {\r\n\t\t\t\t\t_id: '',\r\n\t\t\t\t\tusername: '',\r\n\t\t\t\t\tsoundsFamed: [],\r\n\t\t\t\t\tsounds: [],\r\n\t\t\t\t\tprivate: true,\r\n\t\t\t\t\temail: '',\r\n\t\t\t\t\tjoined: '',\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\tcase 'SET_ALERT':\r\n\t\t\treturn { ...state, ui: { ...state.ui, alert: payload } }\r\n\t\tcase 'CHANGE_THEME':\r\n\t\t\treturn { ...state, ui: { ...state.ui, theme: payload } }\r\n\t\tcase 'SET_SOUNDS_QUERY':\r\n\t\t\treturn { ...state, soundsQuery: payload }\r\n\t\tcase 'SET_SOUNDS_TO_LIVE_PLAY':\r\n\t\t\treturn { ...state, soundsToLivePlay: payload }\r\n\t\tcase 'SET_MODAL_VISIBILITY':\r\n\t\t\treturn { ...state, showModal: payload }\r\n\t\tcase 'TOGGLE_EDITING_DASHBOARD':\r\n\t\t\treturn { ...state, editingDashboard: !state.editingDashboard }\r\n\t\tdefault:\r\n\t\t\tthrow new Error()\r\n\t}\r\n}\r\n\r\nexport type GlobalState = {\r\n\tuser: User\r\n\tui: {\r\n\t\ttheme: string\r\n\t\talert: string\r\n\t}\r\n\tsoundsQuery: string\r\n\tsoundsToLivePlay: Sound[]\r\n\tshowModal: boolean\r\n\teditingDashboard: boolean\r\n}\r\n","import React from 'react'\r\n\r\ninterface SpacingProps {\r\n\tspaces: number\r\n}\r\n\r\nexport default function Spacing({ spaces }: SpacingProps) {\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{new Array(spaces).fill(null).map((item, index) => (\r\n\t\t\t\t<br key={`space-${index}`} />\r\n\t\t\t))}\r\n\t\t</>\r\n\t)\r\n}\r\n","import { User } from '../util/types/User.type'\r\nimport { Sound } from '../util/types/Sound.type'\r\n\r\nexport type GlobalStateAction = {\r\n\ttype: string\r\n\tpayload: any\r\n}\r\n\r\nexport function setUserAction(userData: User): GlobalStateAction {\r\n\treturn {\r\n\t\ttype: 'SET_USER',\r\n\t\tpayload: userData,\r\n\t}\r\n}\r\n\r\nexport function logoutUserAction(): GlobalStateAction {\r\n\treturn {\r\n\t\ttype: 'LOGOUT_USER',\r\n\t\tpayload: null,\r\n\t}\r\n}\r\n\r\nexport function setAlertAction(alert: string) {\r\n\treturn {\r\n\t\ttype: 'SET_ALERT',\r\n\t\tpayload: alert,\r\n\t}\r\n}\r\n\r\nexport function setSoundsSearchQueryAction(queryString: string) {\r\n\treturn {\r\n\t\ttype: 'SET_SOUNDS_QUERY',\r\n\t\tpayload: queryString,\r\n\t}\r\n}\r\n\r\nexport function setSoundsToLivePlayAction(sounds: Sound[]) {\r\n\treturn {\r\n\t\ttype: 'SET_SOUNDS_TO_LIVE_PLAY',\r\n\t\tpayload: sounds,\r\n\t}\r\n}\r\n\r\nexport function setModalVisibilityAction(show: boolean) {\r\n\treturn { type: 'SET_MODAL_VISBILITY', payload: show }\r\n}\r\n\r\nexport function toggleEditingDashboardAction() {\r\n\treturn { type: 'TOGGLE_EDITING_DASHBOARD', payload: null }\r\n}\r\n","import React, { useContext } from 'react'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport styles from './Header.module.scss'\r\nimport { GlobalContext } from '../../context/globalContext'\r\nimport { logoutUserAction } from '../../context/globalActions'\r\n\r\ninterface HeaderProps {\r\n\ttitle: string\r\n\ticon: string\r\n}\r\n\r\nexport default function Header({ title, icon }: HeaderProps) {\r\n\tconst { globalState, dispatch } = useContext(GlobalContext)\r\n\tconst username = globalState?.user.username\r\n\r\n\tconst history = useHistory()\r\n\r\n\tconst logout = () => {\r\n\t\tfetch('/auth/logout', { method: 'DELETE' }).then(() => {\r\n\t\t\tconsole.log('logged out')\r\n\t\t\tdispatch && dispatch(logoutUserAction())\r\n\t\t\thistory.push('/login')\r\n\t\t})\r\n\t}\r\n\r\n\treturn (\r\n\t\t<header className={styles.header}>\r\n\t\t\t<div className={styles.loggedinmessage}>\r\n\t\t\t\t{username && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<p data-aos=\"fade\">{`Hey there, ${username}!`}</p>\r\n\t\t\t\t\t\t<button onClick={logout} data-aos=\"fade\">\r\n\t\t\t\t\t\t\t{username && 'Logout'}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t\t<div className={styles.navbar}>\r\n\t\t\t\t<h1 id=\"title\" data-aos=\"zoom-out\">\r\n\t\t\t\t\t{title}{' '}\r\n\t\t\t\t\t<span role=\"img\" aria-label=\"Header Icon\">\r\n\t\t\t\t\t\t{icon}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</h1>\r\n\t\t\t\t<HeaderNav />\r\n\t\t\t</div>\r\n\t\t</header>\r\n\t)\r\n}\r\n\r\nfunction HeaderNav() {\r\n\tconst links = [\r\n\t\t{ to: '/', icon: '🏠' },\r\n\t\t{ to: '/catalog', icon: '📇' },\r\n\t\t{ to: '/dashboard', icon: '👤' },\r\n\t\t{ to: '/', icon: '⚙' },\r\n\t]\r\n\r\n\treturn (\r\n\t\t<nav id=\"navigation\" data-aos=\"fade\">\r\n\t\t\t{links.map(({ to, icon }, index) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<HeaderLink to={to} icon={icon} key={`nav-link-to-${to}-${index}`} />\r\n\t\t\t\t)\r\n\t\t\t})}\r\n\t\t</nav>\r\n\t)\r\n}\r\n\r\ninterface HeaderLinkProps {\r\n\tto: string\r\n\ticon: string\r\n}\r\n\r\nfunction HeaderLink({ to, icon }: HeaderLinkProps) {\r\n\treturn (\r\n\t\t<Link to={to}>\r\n\t\t\t<button>\r\n\t\t\t\t{' '}\r\n\t\t\t\t<span role=\"img\" aria-label=\"Header Navigation Icon\">\r\n\t\t\t\t\t{icon}\r\n\t\t\t\t</span>\r\n\t\t\t</button>\r\n\t\t</Link>\r\n\t)\r\n}\r\n","import React, { useState, useContext } from 'react'\r\nimport styles from './SearchBar.module.scss'\r\nimport { GlobalContext } from '../../context/globalContext'\r\nimport { setSoundsSearchQueryAction } from '../../context/globalActions'\r\nimport { useHistory } from 'react-router-dom'\r\n\r\nexport default function SearchBar() {\r\n\tconst { globalState, dispatch } = useContext(GlobalContext)\r\n\tconst history = useHistory()\r\n\r\n\tconst handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n\t\tif (!dispatch) return\r\n\t\tdispatch(setSoundsSearchQueryAction(event.target.value))\r\n\t}\r\n\r\n\tconst handleSubmit = (event: React.FormEvent<HTMLFormElement>) => {\r\n\t\tevent.preventDefault()\r\n\t\thistory.push('/catalog')\r\n\t}\r\n\r\n\treturn (\r\n\t\t<form onSubmit={handleSubmit} className={styles.searchbar}>\r\n\t\t\t<input\r\n\t\t\t\tonChange={handleChange}\r\n\t\t\t\ttype=\"text\"\r\n\t\t\t\tplaceholder=\"Search\"\r\n\t\t\t\tvalue={globalState?.soundsQuery}\r\n\t\t\t/>\r\n\t\t\t<button type=\"submit\">\r\n\t\t\t\t<span role=\"img\" aria-label=\"search\">\r\n\t\t\t\t\t🔍\r\n\t\t\t\t</span>\r\n\t\t\t</button>\r\n\t\t</form>\r\n\t)\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport styles from './Carousel.module.scss'\r\nimport Swiper from 'swiper'\r\n\r\ninterface CatalogProps {\r\n\titems: object[]\r\n}\r\n\r\nexport default function Catalog({ items }: CatalogProps) {\r\n\tuseEffect(() => {\r\n\t\tconst swiper = new Swiper('.swiper-container', {\r\n\t\t\teffect: 'slide',\r\n\t\t\tgrabCursor: true,\r\n\t\t\tcenteredSlides: true,\r\n\t\t\tslidesPerView: 3,\r\n\t\t\tbreakpoints: {\r\n\t\t\t\t320: {\r\n\t\t\t\t\tslidesPerView: 1,\r\n\t\t\t\t\tspaceBetween: 20,\r\n\t\t\t\t},\r\n\t\t\t\t480: {\r\n\t\t\t\t\tslidesPerView: 2,\r\n\t\t\t\t\tspaceBetween: 30,\r\n\t\t\t\t},\r\n\t\t\t\t640: {\r\n\t\t\t\t\tslidesPerView: 3,\r\n\t\t\t\t\tspaceBetween: 40,\r\n\t\t\t\t},\r\n\t\t\t\t960: {\r\n\t\t\t\t\tslidesPerView: 6,\r\n\t\t\t\t\tspaceBetween: 40,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.swiper-pagination',\r\n\t\t\t},\r\n\t\t\tnavigation: {\r\n\t\t\t\tnextEl: '.swiper-button-next',\r\n\t\t\t\tprevEl: '.swiper-button-prev',\r\n\t\t\t},\r\n\t\t})\r\n\t}, [items])\r\n\r\n\treturn (\r\n\t\t<section className={`${styles.carousel} swiper-container`}>\r\n\t\t\t<div className=\"swiper-wrapper\">\r\n\t\t\t\t{items.map((item, index) => (\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName={`${styles.item} swiper-slide`}\r\n\t\t\t\t\t\tkey={`Item-${index}`}\r\n\t\t\t\t\t\tdata-aos=\"flip-down\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{item}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t\t<div className={`swiper-button-prev ${styles.navbutton}`}></div>\r\n\t\t\t<div className={`swiper-button-next ${styles.navbutton}`}></div>\r\n\t\t\t<div className={`swiper-pagination`}></div>\r\n\t\t</section>\r\n\t)\r\n}\r\n","export default async function playSound(source_id: string) {\r\n\tconst response = await fetch(`api/sounds/uploads/${source_id}`, {\r\n\t\theaders: { 'Content-Type': 'audio/mpeg' },\r\n\t})\r\n\tconst data = await response.blob()\r\n\tconst reader = new FileReader()\r\n\treader.onloadend = (e) => {\r\n\t\tnew Audio(reader.result?.toString()).play()\r\n\t}\r\n\treader.readAsDataURL(data)\r\n}\r\n","import { useContext } from 'react'\r\nimport { GlobalContext } from '../context/globalContext'\r\nimport { setUserAction } from '../context/globalActions'\r\n\r\nexport default function useRefreshUserData() {\r\n\tconst { globalState, dispatch } = useContext(GlobalContext)\r\n\tconst username = globalState?.user.username\r\n\r\n\tconst refreshUserData = async () => {\r\n\t\tconst response = await fetch(`/api/users/${username}`)\r\n\t\tconst data = await response.json()\r\n\t\tif (!data || response.status !== 200 || !dispatch) return\r\n\t\tdispatch(setUserAction(data))\r\n\t}\r\n\r\n\treturn refreshUserData\r\n}\r\n","import React, { useState, useContext } from 'react'\r\nimport { GlobalContext } from '../../context/globalContext'\r\nimport useRefreshUserData from '../../util/useRefreshUserData'\r\nimport styles from './AddToSoundboard.module.scss'\r\n\r\ninterface AddToSoundboardProps {\r\n\tsoundId: string\r\n}\r\n\r\nexport default function AddToSoundboard({ soundId }: AddToSoundboardProps) {\r\n\tconst { globalState, dispatch } = useContext(GlobalContext)\r\n\tconst [selectedSoundboardId, setSelectedSoundboardId] = useState<string>('')\r\n\tconst refreshUserData = useRefreshUserData()\r\n\r\n\tconst handleSelect = (event: React.ChangeEvent<HTMLSelectElement>) => {\r\n\t\tsetSelectedSoundboardId(event.target.value)\r\n\t}\r\n\r\n\tconst handleSubmit = async (event: React.FormEvent<HTMLFormElement>) => {\r\n\t\tevent.preventDefault()\r\n\t\tif (!selectedSoundboardId) return\r\n\r\n\t\tconst body = JSON.stringify({ soundId })\r\n\t\tconst response = await fetch(\r\n\t\t\t`/api/users/${globalState?.user.username}/soundboards/${selectedSoundboardId}/addsound`,\r\n\t\t\t{\r\n\t\t\t\tmethod: 'PUT',\r\n\t\t\t\tbody,\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t)\r\n\r\n\t\tif (response.status === 200) refreshUserData()\r\n\t}\r\n\r\n\treturn (\r\n\t\t<form onSubmit={handleSubmit} className={styles.addToSoundboardForm}>\r\n\t\t\t<select\r\n\t\t\t\tname=\"soundboard-select\"\r\n\t\t\t\tid=\"soundboard-select\"\r\n\t\t\t\trequired\r\n\t\t\t\tonChange={handleSelect}\r\n\t\t\t\tdefaultValue=\"\"\r\n\t\t\t>\r\n\t\t\t\t<option disabled value=\"\">\r\n\t\t\t\t\t- Choose a Soundboard -\r\n\t\t\t\t</option>\r\n\t\t\t\t{globalState?.user &&\r\n\t\t\t\t\tglobalState?.user.soundboards &&\r\n\t\t\t\t\tglobalState?.user.soundboards.map(({ _id, name }) => (\r\n\t\t\t\t\t\t<option value={_id} key={_id}>\r\n\t\t\t\t\t\t\t{name}\r\n\t\t\t\t\t\t</option>\r\n\t\t\t\t\t))}\r\n\t\t\t</select>\r\n\t\t\t<button type=\"submit\">\r\n\t\t\t\t<span role=\"img,\" aria-label=\"Add to Soundboard\">\r\n\t\t\t\t\t➕\r\n\t\t\t\t</span>\r\n\t\t\t</button>\r\n\t\t</form>\r\n\t)\r\n}\r\n","import React, { useState, useEffect, useContext } from 'react'\r\nimport Carousel from '../components/Carousel'\r\nimport { Sound } from '../util/types/Sound.type'\r\nimport playSound from '../util/playSound'\r\nimport { GlobalContext } from '../context/globalContext'\r\nimport useRefreshUserData from '../util/useRefreshUserData'\r\nimport AddToSoundboard from '../components/AddToSoundboard'\r\nimport FameButton from '../components/FameButton/FameButton'\r\n\r\ninterface SoundCatalogContainerProps {\r\n\tquery?: string\r\n\tlist?: string[]\r\n\tshowCreatorActions?: boolean\r\n\tshowAddToSoundboard?: boolean\r\n}\r\n\r\nexport default function SoundCatalogContainer({\r\n\tquery = '',\r\n\tlist = [],\r\n\tshowCreatorActions = false,\r\n\tshowAddToSoundboard = false,\r\n}: SoundCatalogContainerProps) {\r\n\tconst refreshUserData = useRefreshUserData()\r\n\tconst { globalState, dispatch } = useContext(GlobalContext)\r\n\tconst [sounds, setSounds] = useState<Sound[]>([])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!dispatch) return\r\n\t\tif (list.length > 0 && query) return\r\n\r\n\t\tasync function getSounds() {\r\n\t\t\ttry {\r\n\t\t\t\tif (list.length > 0) {\r\n\t\t\t\t\tconst promises = list.map((soundId) => {\r\n\t\t\t\t\t\treturn fetch(`/api/sounds/${soundId}`)\r\n\t\t\t\t\t})\r\n\t\t\t\t\tPromise.all(promises)\r\n\t\t\t\t\t\t.then((responses) =>\r\n\t\t\t\t\t\t\tPromise.all(responses.map((response) => response.json()))\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t.then((data) => {\r\n\t\t\t\t\t\t\tsetSounds(() => data)\r\n\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t})\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst response = await fetch(`/api/sounds?${query}`)\r\n\t\t\t\tconst data: Sound[] | null = await response.json()\r\n\t\t\t\tif (data === null) throw new Error('Failed to fetch sounds.')\r\n\t\t\t\tsetSounds(() => data)\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error(error.message)\r\n\t\t\t\treturn []\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tgetSounds()\r\n\t}, [globalState?.user.sounds])\r\n\r\n\t// function editSound(sound: Sound) {\r\n\t// \treturn async () => {\r\n\t// \t\tconsole.log(`editing ${sound.name}`)\r\n\r\n\t// \t\tif (!dispatch) return\r\n\t// \t\tdispatch(setModalVisibilityAction(true))\r\n\r\n\t// \t\t// const response = await fetch(`/api/sounds/${soundId}/editsound`, {\r\n\t// \t\t// \tmethod: 'PUT',\r\n\t// \t\t// })\r\n\t// \t\t// if (response.status === 200) {\r\n\t// \t\t// \trefreshUserData()\r\n\t// \t\t// }\r\n\t// \t}\r\n\t// }\r\n\r\n\tfunction deleteSound({ name, _id }: Sound) {\r\n\t\treturn async () => {\r\n\t\t\tconst confirmed = window.confirm(`Delete sound: ${name.toUpperCase()}?`)\r\n\t\t\tif (!confirmed) return\r\n\r\n\t\t\tconst response = await fetch(`/api/sounds/${_id}`, {\r\n\t\t\t\tmethod: 'DELETE',\r\n\t\t\t})\r\n\t\t\tif (response.status === 200) {\r\n\t\t\t\trefreshUserData()\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction items() {\r\n\t\treturn sounds.map((sound) => (\r\n\t\t\t<>\r\n\t\t\t\t<p>{sound.name}</p>\r\n\t\t\t\t<p>{sound.author}</p>\r\n\t\t\t\t{showAddToSoundboard && <AddToSoundboard soundId={sound._id} />}\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<button onClick={() => playSound(sound.sourceId)}>\r\n\t\t\t\t\t\t<span role=\"img\" aria-label=\"play sound\">\r\n\t\t\t\t\t\t\t🔊\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t{showCreatorActions && globalState?.user.username === sound.author && (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t{/* <button onClick={editSound(sound)}>\r\n\t\t\t\t\t\t\t\t<span role=\"img\" aria-label=\"delete sound\">\r\n\t\t\t\t\t\t\t\t\t✏\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</button> */}\r\n\t\t\t\t\t\t\t<button onClick={deleteSound(sound)}>\r\n\t\t\t\t\t\t\t\t<span role=\"img\" aria-label=\"delete sound\">\r\n\t\t\t\t\t\t\t\t\t❌\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</>\r\n\t\t))\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Carousel items={items()} />\r\n\t\t</>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport styles from './Button.module.scss'\r\n\r\ninterface ButtonProps {\r\n\tcolor?: string\r\n\tchildren: React.ReactChild\r\n\ttype?: 'button' | 'submit' | 'reset'\r\n\tonClick?:\r\n\t\t| ((event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void)\r\n\t\t| undefined\r\n}\r\n\r\nexport default function Button({\r\n\tcolor = '',\r\n\tchildren,\r\n\ttype = 'button',\r\n\tonClick,\r\n}: ButtonProps) {\r\n\treturn (\r\n\t\t<button\r\n\t\t\tclassName={styles.button}\r\n\t\t\tstyle={{ [color ? 'backgroundColor' : '']: color }}\r\n\t\t\ttype={type}\r\n\t\t\tonClick={onClick}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</button>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport styles from './Footer.module.scss'\r\n\r\nexport default function Footer() {\r\n\treturn (\r\n\t\t<footer className={styles.footer}>\r\n\t\t\t<span>\r\n\t\t\t\tMade with{' '}\r\n\t\t\t\t<span role=\"img\" aria-label=\"heart\">\r\n\t\t\t\t\t💖\r\n\t\t\t\t</span>{' '}\r\n\t\t\t\tby Mat Seto\r\n\t\t\t</span>\r\n\t\t</footer>\r\n\t)\r\n}\r\n","import { useContext, useEffect } from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { GlobalContext } from '../context/globalContext'\r\nimport { setUserAction, logoutUserAction } from '../context/globalActions'\r\nimport useRefreshUserData from './useRefreshUserData'\r\n\r\nexport default function useUserInfoFromCookie(enableRedirect: boolean = false) {\r\n\tconst { dispatch } = useContext(GlobalContext)\r\n\tconst history = useHistory()\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!dispatch) return\r\n\t\tconst username = document.cookie.slice('user='.length)\r\n\t\tif (!username) {\r\n\t\t\tif (enableRedirect) logout()\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// console.log('updating')\r\n\r\n\t\tconst getUserData = async () => {\r\n\t\t\tconst response = await fetch(`/api/users/${username}`)\r\n\t\t\tconst data = await response.json()\r\n\t\t\tif (response.status !== 200 || !data) {\r\n\t\t\t\tlogout()\r\n\t\t\t}\r\n\t\t\tdispatch(setUserAction(data))\r\n\t\t\tif(enableRedirect)\r\n\t\t\t\thistory.push('/dashboard')\r\n\t\t}\r\n\t\tgetUserData()\r\n\r\n\t\tasync function logout() {\r\n\t\t\thistory.push('/login')\r\n\t\t\tif (dispatch) dispatch(logoutUserAction())\r\n\t\t\tif (username) await fetch('/auth/logout', { method: 'DELETE' })\r\n\t\t\treturn\r\n\t\t}\r\n\t}, [])\r\n}\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport Spacing from '../components/Spacing'\r\nimport Header from '../components/Header'\r\nimport SearchBar from '../components/SearchBar'\r\nimport SoundCarouselContainer from '../containers/SoundCarouselContainer'\r\nimport Button from '../components/Button'\r\nimport Footer from '../components/Footer'\r\nimport useUserInfoFromCookie from '../util/useUserInfoFromCookie'\r\n\r\nexport default function Home() {\r\n\tuseUserInfoFromCookie()\r\n\r\n\treturn (\r\n\t\t<article>\r\n\t\t\t<Header title=\"SoundBird\" icon=\"🐦\" />\r\n\t\t\t<main>\r\n\t\t\t\t<Spacing spaces={2} />\r\n\t\t\t\t<SearchBar />\r\n\t\t\t\t<Spacing spaces={1} />\r\n\t\t\t\t<SoundCarouselContainer />\r\n\t\t\t\t<Spacing spaces={5} />\r\n\t\t\t\t<div data-aos=\"fade\">\r\n\t\t\t\t\t<Link to=\"/login\">\r\n\t\t\t\t\t\t<Button>Get Started</Button>\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</div>\r\n\t\t\t</main>\r\n\t\t\t<Footer />\r\n\t\t</article>\r\n\t)\r\n}\r\n","import React, {\r\n\tuseState,\r\n\tChangeEvent,\r\n\tFormEvent,\r\n\tuseRef,\r\n\tRefObject,\r\n\tuseContext,\r\n} from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport styles from './Form.module.scss'\r\nimport Button from '../Button'\r\nimport Spacing from '../Spacing'\r\nimport useRefreshUserData from '../../util/useRefreshUserData'\r\n\r\nexport default function Form({\r\n\taction,\r\n\tmethod,\r\n\tfields,\r\n\tsubmitText,\r\n\tformIsValid,\r\n\tredirect,\r\n\tcustomBodyFromMultipartData,\r\n}: FormProps) {\r\n\tconst [formState, setFormState] = useState(\r\n\t\tObject.fromEntries(fields.map(({ name }) => [name, '']))\r\n\t)\r\n\tconst [errorMessage, setErrorMessage] = useState<string>('')\r\n\tconst history = useHistory()\r\n\tconst formRef = useRef<any>(null)\r\n\tconst fileRef = useRef<any>(null)\r\n\tconst refreshUserData = useRefreshUserData()\r\n\r\n\tconst handleChange = (\r\n\t\tevent: ChangeEvent<\r\n\t\t\tHTMLInputElement | HTMLSelectElement | HTMLTextAreaElement\r\n\t\t>\r\n\t) => {\r\n\t\tconst { name, value } = event.target\r\n\r\n\t\t// Optional custom validation\r\n\t\tif (formIsValid && !formIsValid(formRef, formState)) return\r\n\r\n\t\tsetFormState((prevState) => {\r\n\t\t\treturn { ...prevState, [name]: value }\r\n\t\t})\r\n\t}\r\n\r\n\tconst handleSubmit = async (event: FormEvent<HTMLFormElement>) => {\r\n\t\ttry {\r\n\t\t\tevent.preventDefault()\r\n\r\n\t\t\tlet body, response\r\n\t\t\tif (customBodyFromMultipartData) {\r\n\t\t\t\tbody = customBodyFromMultipartData(formState, fileRef.current.files)\r\n\t\t\t\tresponse = await fetch(action, {\r\n\t\t\t\t\tmethod,\r\n\t\t\t\t\tbody,\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\t// Default form POST\r\n\t\t\t\t// console.log(formState)\r\n\r\n\t\t\t\tbody = JSON.stringify(formState)\r\n\t\t\t\tresponse = await fetch(action, {\r\n\t\t\t\t\tmethod,\r\n\t\t\t\t\tbody,\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t\t},\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tconst responseData = await response.json()\r\n\t\t\t// console.log(responseData)\r\n\r\n\t\t\tif (response.status === 200) {\r\n\t\t\t\tformRef.current.reset()\r\n\t\t\t\tif (redirect) history.push(redirect)\r\n\t\t\t\telse refreshUserData()\r\n\t\t\t} \r\n\t\t} catch (error) {\r\n\t\t\tsetErrorMessage(() => 'Invalid input.')\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<form\r\n\t\t\taction={action}\r\n\t\t\tmethod={method}\r\n\t\t\tclassName={styles.form}\r\n\t\t\tonSubmit={handleSubmit}\r\n\t\t\tref={formRef}\r\n\t\t>\r\n\t\t\t{fields.map(\r\n\t\t\t\t(\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname,\r\n\t\t\t\t\t\tplaceholder,\r\n\t\t\t\t\t\ttype,\r\n\t\t\t\t\t\toptions,\r\n\t\t\t\t\t\taccept,\r\n\t\t\t\t\t\tpattern,\r\n\t\t\t\t\t\tinvalidTitle,\r\n\t\t\t\t\t\trequired,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tindex\r\n\t\t\t\t) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div key={`${name}-${type}-${index}`}>\r\n\t\t\t\t\t\t\t{type === 'select' ? (\r\n\t\t\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\t\t\tid={name}\r\n\t\t\t\t\t\t\t\t\tname={name}\r\n\t\t\t\t\t\t\t\t\tplaceholder={placeholder}\r\n\t\t\t\t\t\t\t\t\trequired={required}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{options?.map((option, index) => (\r\n\t\t\t\t\t\t\t\t\t\t<option value={option} key={`${option}-${index}`}>\r\n\t\t\t\t\t\t\t\t\t\t\t{option}\r\n\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t) : type === 'textarea' ? (\r\n\t\t\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\t\t\tid={name}\r\n\t\t\t\t\t\t\t\t\tname={name}\r\n\t\t\t\t\t\t\t\t\tplaceholder={placeholder}\r\n\t\t\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\t\t\tmaxLength={300}\r\n\t\t\t\t\t\t\t\t\trequired={required}\r\n\t\t\t\t\t\t\t\t></textarea>\r\n\t\t\t\t\t\t\t) : type === 'file' ? (\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\tid={name}\r\n\t\t\t\t\t\t\t\t\tname={name}\r\n\t\t\t\t\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\t\t\t\t\taccept={accept}\r\n\t\t\t\t\t\t\t\t\tref={fileRef}\r\n\t\t\t\t\t\t\t\t\tpattern={pattern}\r\n\t\t\t\t\t\t\t\t\ttitle={invalidTitle}\r\n\t\t\t\t\t\t\t\t\trequired={required}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\tid={name}\r\n\t\t\t\t\t\t\t\t\tname={name}\r\n\t\t\t\t\t\t\t\t\ttype={type}\r\n\t\t\t\t\t\t\t\t\tplaceholder={placeholder}\r\n\t\t\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\t\t\tpattern={pattern}\r\n\t\t\t\t\t\t\t\t\ttitle={invalidTitle}\r\n\t\t\t\t\t\t\t\t\trequired={required}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t<label htmlFor={name}>{placeholder}</label>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t)}\r\n\t\t\t<p className={styles.errorMessage}>{errorMessage}</p>\r\n\t\t\t<Spacing spaces={2} />\r\n\t\t\t<Button type=\"submit\">{submitText}</Button>\r\n\t\t</form>\r\n\t)\r\n}\r\n\r\nexport interface Field {\r\n\tname: string\r\n\tplaceholder: string\r\n\ttype: string\r\n\tpattern?: string\r\n\tinvalidTitle?: string\r\n\toptions?: string[]\r\n\taccept?: string\r\n\trequired?: boolean\r\n}\r\n\r\ninterface FormProps {\r\n\taction: string\r\n\tmethod: string\r\n\tfields: Field[]\r\n\tsubmitText: string\r\n\tformIsValid?: (formRef: RefObject<any>, formState: any) => boolean\r\n\tcustomBodyFromMultipartData?: (formState: any, files: File[]) => any\r\n\tredirect?: string\r\n}\r\n","import React, { useEffect, useContext } from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport Form, { Field } from '../components/Form'\r\nimport { GlobalContext } from '../context/globalContext'\r\n\r\nexport default function LoginForm() {\r\n\tconst { globalState } = useContext(GlobalContext)\r\n\tconst username = globalState?.user.username\r\n\r\n\tconst history = useHistory()\r\n\r\n\tuseEffect(() => {\r\n\t\tif (username) history.push('/dashboard')\r\n\t}, [])\r\n\r\n\tconst fields: Field[] = [\r\n\t\t{\r\n\t\t\tname: 'email',\r\n\t\t\tplaceholder: 'email',\r\n\t\t\ttype: 'email',\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'password',\r\n\t\t\tplaceholder: 'password',\r\n\t\t\ttype: 'password',\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t]\r\n\r\n\treturn (\r\n\t\t<Form\r\n\t\t\taction=\"/auth/login\"\r\n\t\t\tfields={fields}\r\n\t\t\tmethod=\"POST\"\r\n\t\t\tsubmitText=\"Login\"\r\n\t\t\tredirect=\"/dashboard\"\r\n\t\t/>\r\n\t)\r\n}\r\n\r\ninterface LoginFormState {\r\n\temail: string\r\n\tpassword: string\r\n}\r\n","import React from 'react'\r\nimport Button from '../components/Button'\r\nimport firebase from 'firebase/app'\r\nimport 'firebase/auth'\r\nimport useUserInfoFromCookie from '../util/useUserInfoFromCookie'\r\nimport { auth } from '../App'\r\n\r\nexport default function GoogleSignInButton() {\r\n\tuseUserInfoFromCookie(true)\r\n\tconst provider = new firebase.auth.GoogleAuthProvider()\r\n\tconst googleSignIn = async () => {\r\n\t\ttry {\r\n\t\t\tconst result = await auth.signInWithPopup(provider)\r\n\t\t\tif (!result.user || !auth.currentUser)\r\n\t\t\t\tthrow new Error('User details unavailable.')\r\n\r\n\t\t\t/* check if user already exists (by email) */\r\n\t\t\tconst { email } = result.user\r\n\t\t\tconst firebaseAuthToken = await auth.currentUser.getIdToken()\r\n\r\n\t\t\tconst isEmailRegisteredResponse = await fetch(`/api/users/email/${email}`)\r\n\t\t\tconst isEmailRegistered:boolean = (await isEmailRegisteredResponse.json()).result\r\n\r\n\t\t\t/* register/sign in using Google Account details */\r\n\t\t\tconst body = {\r\n\t\t\t\tfirebaseAuthToken,\r\n\t\t\t\temail,\r\n\t\t\t\tdisplayName: '',\r\n\t\t\t}\r\n\r\n\t\t\t/* REPLACE WITH MODAL */\r\n\t\t\t/* user registers with a display name */\r\n\t\t\t/* skip if user is already registered */\r\n\t\t\tif (!isEmailRegistered) {\r\n\t\t\t\tconsole.log('Prompting')\r\n\t\t\t\tbody.displayName =\r\n\t\t\t\t\tprompt('Complete Your registration: Enter Display Name:') || ''\r\n\t\t\t\tif (!body.displayName) {\r\n\t\t\t\t\tconsole.error('Failed registration.')\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst bodyString = JSON.stringify(body)\r\n\t\t\tconst action = '/auth/register'\r\n\t\t\tconst method = 'POST'\r\n\t\t\tconst response = await fetch(action, {\r\n\t\t\t\tmethod,\r\n\t\t\t\tbody: bodyString,\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t},\r\n\t\t\t})\r\n\t\t\tif (response.status !== 200) {\r\n\t\t\t\tthrow new Error('Failed to create new account with Google')\r\n\t\t\t}\r\n\t\t\twindow.location.reload()\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(error)\r\n\t\t\tawait auth.signOut()\r\n\t\t}\r\n\t}\r\n\treturn <Button onClick={googleSignIn}>Sign in with Google</Button>\r\n}\r\n","import React from 'react'\r\nimport Header from '../components/Header'\r\nimport LoginForm from '../containers/LoginForm'\r\nimport { Link } from 'react-router-dom'\r\nimport GoogleSignInButton from '../containers/GoogleSignInButton'\r\n\r\nexport default function Account() {\r\n\treturn (\r\n\t\t<article>\r\n\t\t\t<Header title=\"Login\" icon=\"🔐\" />\r\n\t\t\t<h1 style={{ textAlign: 'center' }}>Welcome back!</h1>\r\n\t\t\t<LoginForm />\r\n\t\t\t<div style={toggleSectionStyles}>\r\n\t\t\t\t<p style={{ marginRight: '1rem' }}>Don't have an account?</p>\r\n\t\t\t\t<Link to=\"/register\" style={{ fontWeight: 'bolder', color: 'black' }}>\r\n\t\t\t\t\tRegister\r\n\t\t\t\t</Link>\r\n\t\t\t</div>\r\n\t\t\t<div style={{textAlign:\"center\", marginTop:\"2rem\", fontSize:\"2rem\"}}>or...</div>\r\n\t\t\t<GoogleSignInButton />\r\n\t\t</article>\r\n\t)\r\n}\r\n\r\nconst toggleSectionStyles = {\r\n\twidth: '100%',\r\n\tdisplay: 'flex',\r\n\tjustifyContent: 'center',\r\n\talignItems: 'center',\r\n\tmarginTop: '1rem',\r\n\tfontSize: '1.2rem',\r\n}\r\n","import React, { RefObject } from 'react'\r\nimport Form, { Field } from '../components/Form'\r\n\r\nexport default function RegisterForm() {\r\n\tconst fields: Field[] = [\r\n\t\t{\r\n\t\t\tname: 'username',\r\n\t\t\tplaceholder: 'username',\r\n\t\t\ttype: 'username',\r\n\t\t\tpattern: '^[\\\\w\\\\d_]{3,30}$',\r\n\t\t\tinvalidTitle:\r\n\t\t\t\t\"3-30 letters and numbers, no special characters except '_'\",\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'email',\r\n\t\t\tplaceholder: 'email',\r\n\t\t\ttype: 'email',\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'confirmEmail',\r\n\t\t\tplaceholder: 'confirm email',\r\n\t\t\ttype: 'email',\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'password',\r\n\t\t\tplaceholder: 'password',\r\n\t\t\ttype: 'password',\r\n\t\t\tpattern:\r\n\t\t\t\t'^(?=.*[A-Z])(?=.*[a-z])(?=.*[!@#$%^&*])[A-Za-z0-9!@#$%^&]{6,100}$',\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'confirmPassword',\r\n\t\t\tplaceholder: 'confirm password',\r\n\t\t\ttype: 'password',\r\n\t\t\tpattern:\r\n\t\t\t\t'^(?=.*[A-Z])(?=.*[a-z])(?=.*[!@#$%^&*])[A-Za-z0-9!@#$%^&]{6,100}$',\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t]\r\n\r\n\tconst isValid = (\r\n\t\tformRef: RefObject<any>,\r\n\t\t{ email, confirmEmail, password, confirmPassword }: RegisterFormState\r\n\t) => {\r\n\t\tconst inputs: HTMLInputElement[] = [\r\n\t\t\t...formRef.current.querySelectorAll('input'),\r\n\t\t]\r\n\r\n\t\t// Username\t\t\t[0]\r\n\t\t// Email \t\t\t[1]\r\n\t\t// Email Confirm \t[2]\r\n\t\t// Password \t\t[3]\r\n\t\t// Password Confirm\t[4]\r\n\t\tinputFieldsMatch(inputs[1], inputs[2], 'Email')\r\n\t\tinputFieldsMatch(inputs[3], inputs[4], 'Password')\r\n\r\n\t\treturn true\r\n\r\n\t\tfunction inputFieldsMatch(\r\n\t\t\tinput1: HTMLInputElement,\r\n\t\t\tinput2: HTMLInputElement,\r\n\t\t\tfield: string\r\n\t\t) {\r\n\t\t\tif (input1.value !== input2.value) {\r\n\t\t\t\tinput2.title = `${field} and Confirm ${field} fields do not match`\r\n\t\t\t\tinput2.pattern = ''\r\n\t\t\t} else {\r\n\t\t\t\tinput2.title = ''\r\n\t\t\t\tinput2.pattern = '.*'\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Form\r\n\t\t\taction=\"/auth/register\"\r\n\t\t\tfields={fields}\r\n\t\t\tmethod=\"POST\"\r\n\t\t\tsubmitText=\"Create Account\"\r\n\t\t\tformIsValid={isValid}\r\n\t\t\tredirect=\"/login\"\r\n\t\t/>\r\n\t)\r\n}\r\n\r\ninterface RegisterFormState {\r\n\tusername: string\r\n\temail: string\r\n\tconfirmEmail: string\r\n\tpassword: string\r\n\tconfirmPassword: string\r\n}\r\n","import React from 'react'\r\nimport Spacing from '../components/Spacing'\r\nimport Header from '../components/Header'\r\nimport RegisterForm from '../containers/RegisterForm'\r\nimport { Link } from 'react-router-dom'\r\n\r\nexport default function Account() {\r\n\treturn (\r\n\t\t<article>\r\n\t\t\t<Header title=\"Register\" icon=\"🔐\" />\r\n\t\t\t<Spacing spaces={1} />\r\n\t\t\t<RegisterForm />\r\n\t\t\t<div style={redirectStyles}>\r\n\t\t\t\t<p style={{ marginRight: '1rem' }}>Already have an account?</p>\r\n\t\t\t\t<Link to=\"/login\" style={{ fontWeight: 'bolder', color: 'black' }}>\r\n\t\t\t\t\tLogin\r\n\t\t\t\t</Link>\r\n\t\t\t</div>\r\n\t\t</article>\r\n\t)\r\n}\r\n\r\nconst redirectStyles = {\r\n\twidth: '100%',\r\n\tdisplay: 'flex',\r\n\tjustifyContent: 'center',\r\n\talignItems: 'center',\r\n\tmarginTop: '1rem',\r\n\tfontSize: '1.2rem',\r\n}\r\n","import React from 'react'\r\nimport Form, { Field } from '../components/Form'\r\n\r\nexport default function AddSoundForm() {\r\n\tconst fields: Field[] = [\r\n\t\t{\r\n\t\t\tname: 'category',\r\n\t\t\tplaceholder: 'category',\r\n\t\t\ttype: 'select',\r\n\t\t\toptions: ['Miscellaneous', 'Creature', 'Item', 'Spell', 'Weapon'],\r\n\t\t},\r\n\t\t{ name: 'name', placeholder: 'name', type: 'text', required: true },\r\n\t\t{\r\n\t\t\tname: 'triggers',\r\n\t\t\tplaceholder: 'triggers',\r\n\t\t\ttype: 'text',\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'description',\r\n\t\t\tplaceholder: 'description',\r\n\t\t\ttype: 'textarea',\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'uploadedSound',\r\n\t\t\tplaceholder: 'sound upload',\r\n\t\t\ttype: 'file',\r\n\t\t\taccept: 'audio/*',\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t]\r\n\r\n\tfunction createMultipartBody(formData: any, files: File[]) {\r\n\t\tif (!formData.category) formData.category = 'Miscellaneous'\r\n\r\n\t\tconst body = new FormData()\r\n\t\tObject.keys(formData).forEach((key) => {\r\n\t\t\tbody.append(key, formData[key])\r\n\t\t})\r\n\r\n\t\tbody.append('uploadedSound', files[0])\r\n\t\treturn body\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Form\r\n\t\t\taction=\"/api/sounds/add\"\r\n\t\t\tfields={fields}\r\n\t\t\tmethod=\"POST\"\r\n\t\t\tsubmitText=\"Upload\"\r\n\t\t\tcustomBodyFromMultipartData={createMultipartBody}\r\n\t\t/>\r\n\t)\r\n}\r\n","import React, { useContext } from 'react'\r\nimport Form, { Field } from '../components/Form'\r\nimport { GlobalContext } from '../context/globalContext'\r\n\r\nconst fields: Field[] = [\r\n\t{\r\n\t\tname: 'soundboardName',\r\n\t\tplaceholder: 'name',\r\n\t\ttype: 'text',\r\n\t\trequired: true,\r\n\t},\r\n]\r\n\r\nexport default function CreateSoundboardFormContainer() {\r\n\tconst { globalState } = useContext(GlobalContext)\r\n\tconst username = globalState?.user.username\r\n\r\n\treturn (\r\n\t\t<Form\r\n\t\t\taction={`/api/users/${username}/soundboards/create`}\r\n\t\t\tmethod=\"POST\"\r\n\t\t\tfields={fields}\r\n\t\t\tsubmitText=\"Create Soundboard\"\r\n\t\t/>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport default function Spinner({ icon }: SpinnerProps) {\r\n\treturn (\r\n\t\t<div className=\"spinner\">\r\n\t\t\t<span role=\"img\" aria-label=\"spinner\">\r\n\t\t\t\t{icon}\r\n\t\t\t</span>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\ninterface SpinnerProps {\r\n\ticon: string\r\n}\r\n","import React, { useState, useEffect, useContext, useRef } from 'react'\r\nimport playSound from '../../util/playSound'\r\nimport Carousel from '../../components/Carousel'\r\nimport styles from './Soundboards.module.scss'\r\nimport Spinner from '../../components/Spinner'\r\nimport { Soundboard } from '../../util/types/Soundboard.type'\r\nimport { User } from '../../util/types/User.type'\r\nimport { Sound } from '../../util/types/Sound.type'\r\nimport { GlobalContext } from '../../context/globalContext'\r\nimport useRefreshUserData from '../../util/useRefreshUserData'\r\nimport { setSoundsToLivePlayAction } from '../../context/globalActions'\r\nimport { globalStateReducer } from '../../context/globalReducer'\r\n\r\nexport default function SoundBoards() {\r\n\tconst refreshUserData = useRefreshUserData()\r\n\tconst { globalState, dispatch } = useContext(GlobalContext)\r\n\tconst soundboards = globalState?.user.soundboards\r\n\r\n\tconst [soundboardSoundData, setSoundboardSoundData] = useState<\r\n\t\tSoundboardSounds[]\r\n\t>([])\r\n\tconst [isLoading, setIsLoading] = useState<boolean>(true)\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!soundboards || soundboards.length === 0) return\r\n\t\tsetIsLoading(true)\r\n\t\tsoundboards.forEach((soundboard) => {\r\n\t\t\tif (!soundboard.sounds || soundboard.sounds.length === 0) return\r\n\t\t\tconst soundsDataPromises = soundboard.sounds.map((soundId: any) =>\r\n\t\t\t\tfetch(`/api/sounds/${soundId}`, {\r\n\t\t\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t\tPromise.all(soundsDataPromises)\r\n\t\t\t\t.then((responses) =>\r\n\t\t\t\t\tPromise.all(responses.map((response) => response.json()))\r\n\t\t\t\t)\r\n\t\t\t\t.then((data) => {\r\n\t\t\t\t\tsetSoundboardSoundData((prevSoundboardSoundData) => [\r\n\t\t\t\t\t\t...prevSoundboardSoundData.filter(\r\n\t\t\t\t\t\t\t(soundboardData) =>\r\n\t\t\t\t\t\t\t\tsoundboardData.soundboardName !== soundboard.name\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\t{ soundboardName: soundboard.name, sounds: data },\r\n\t\t\t\t\t])\r\n\t\t\t\t})\r\n\t\t})\r\n\t\tsetIsLoading(false)\r\n\t}, [soundboards])\r\n\r\n\tconst deleteSoundboard = ({ name, _id }: Soundboard) => {\r\n\t\treturn async () => {\r\n\t\t\tconst confirmed = window.confirm(\r\n\t\t\t\t`Delete soundboard: ${name.toUpperCase()}?`\r\n\t\t\t)\r\n\t\t\tif (!confirmed) return\r\n\r\n\t\t\tconst route = `/api/users/${globalState?.user.username}/soundboards/${_id}/deletesoundboard`\r\n\t\t\tconst response = await fetch(route, {\r\n\t\t\t\tmethod: 'DELETE',\r\n\t\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t\t})\r\n\r\n\t\t\tif (response.status === 200) refreshUserData()\r\n\t\t}\r\n\t}\r\n\r\n\t// Store sound data from soundboard in globalState for live playing\r\n\tconst livePlay = (soundboardSoundIds: string[]) => {\r\n\t\treturn () => {\r\n\t\t\tconst soundPromises = soundboardSoundIds.map((soundId) =>\r\n\t\t\t\tfetch(`/api/sounds/${soundId}`)\r\n\t\t\t)\r\n\t\t\tPromise.all(soundPromises)\r\n\t\t\t\t.then((responses) =>\r\n\t\t\t\t\tPromise.all(responses.map((response) => response.json()))\r\n\t\t\t\t)\r\n\t\t\t\t.then((data) => {\r\n\t\t\t\t\tif (dispatch) dispatch(setSoundsToLivePlayAction(data))\r\n\t\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<section>\r\n\t\t\t{!isLoading && soundboards ? (\r\n\t\t\t\tsoundboards.map((soundBoard) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName={styles.soundboard}\r\n\t\t\t\t\t\t\tkey={soundBoard._id}\r\n\t\t\t\t\t\t\tdata-aos=\"fade-right\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{globalState?.editingDashboard && (\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tonClick={deleteSoundboard(soundBoard)}\r\n\t\t\t\t\t\t\t\t\tclassName={styles.deletebutton}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<span role=\"img\" aria-label=\"Delete Soundboard\">\r\n\t\t\t\t\t\t\t\t\t\t❌\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t<button onClick={livePlay(soundBoard.sounds)}>\r\n\t\t\t\t\t\t\t\t<span role=\"img\" aria-label=\"Live play\">\r\n\t\t\t\t\t\t\t\t\t👂\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tonClick={function (e: any) {\r\n\t\t\t\t\t\t\t\t\te.target.classList.toggle(styles.expanded)\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tclassName={styles.dropdown}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<span>{soundBoard.sounds.length}</span>\r\n\t\t\t\t\t\t\t\t{soundBoard.name}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t{soundBoard.sounds.length > 0 ? (\r\n\t\t\t\t\t\t\t\t\tSoundsList(soundboardSoundData, soundBoard, globalState?.user)\r\n\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t<p>There's nothing here... yet!</p>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)\r\n\t\t\t\t})\r\n\t\t\t) : (\r\n\t\t\t\t<Spinner icon=\"🐧\" />\r\n\t\t\t)}\r\n\t\t</section>\r\n\t)\r\n}\r\n\r\ninterface SoundboardSounds {\r\n\tsoundboardName: string\r\n\tsounds: Sound[]\r\n}\r\n\r\nfunction SoundsList(\r\n\tsoundboardSoundData: SoundboardSounds[],\r\n\tsoundBoard: Soundboard,\r\n\tuserInfo: User | undefined\r\n) {\r\n\tconst refreshUserData = useRefreshUserData()\r\n\tconst { globalState } = useContext(GlobalContext)\r\n\r\n\tconst soundboard = soundboardSoundData.find(\r\n\t\t(soundboardSounds) => soundboardSounds.soundboardName === soundBoard.name\r\n\t)\r\n\r\n\tconst username = userInfo?.username\r\n\r\n\tif (!soundboard || !username) return null\r\n\tconst deleteFromSoundboard = (soundId: string) => {\r\n\t\treturn async () => {\r\n\t\t\tconst confirmed = window.confirm('Delete sound from soundboard?')\r\n\t\t\tif (!confirmed) return\r\n\r\n\t\t\tconst body = JSON.stringify({ soundId })\r\n\t\t\tconst response = await fetch(\r\n\t\t\t\t`/api/users/${username}/soundboards/${soundBoard._id}/deletesound`,\r\n\t\t\t\t{\r\n\t\t\t\t\tmethod: 'DELETE',\r\n\t\t\t\t\tbody,\r\n\t\t\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t\tif (response.status === 200) refreshUserData()\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Carousel\r\n\t\t\titems={soundboard.sounds.map((sound, index) => (\r\n\t\t\t\t<li key={`${soundBoard.name}-list-item-${sound._id}-${index}`}>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<p>{sound.name}</p>\r\n\t\t\t\t\t\t\t<p>Author: {sound.author}</p>\r\n\t\t\t\t\t\t\t<p>Category: {sound.category}</p>\r\n\t\t\t\t\t\t\t<p>Created: {new Date(sound.created).toDateString()}</p>\r\n\t\t\t\t\t\t\t<p>{sound.description}</p>\r\n\t\t\t\t\t\t\t<p>Fame: {sound.fame}</p>\r\n\t\t\t\t\t\t\t{sound.triggers.length > 0 ? (\r\n\t\t\t\t\t\t\t\t<p>{sound.triggers.join(', ')}</p>\r\n\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tdisplay: 'flex',\r\n\t\t\t\t\t\t\t\twidth: '100%',\r\n\t\t\t\t\t\t\t\tjustifyContent: 'center',\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<button onClick={() => playSound(sound.sourceId)}>\r\n\t\t\t\t\t\t\t\t<span role=\"img\" aria-label=\"Play sound\">\r\n\t\t\t\t\t\t\t\t\t🔊\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t{globalState?.editingDashboard && (\r\n\t\t\t\t\t\t\t\t<button onClick={deleteFromSoundboard(sound._id)}>\r\n\t\t\t\t\t\t\t\t\t<span role=\"img\" aria-label=\"Remove from soundboard\">\r\n\t\t\t\t\t\t\t\t\t\t❌\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</li>\r\n\t\t\t))}\r\n\t\t/>\r\n\t)\r\n}\r\n","import React, { useContext, StyleHTMLAttributes } from 'react'\r\nimport Header from '../components/Header'\r\nimport AddSoundForm from '../containers/AddSoundForm'\r\nimport SoundCarouselContainer from '../containers/SoundCarouselContainer'\r\nimport CreateSoundboardFormContainer from '../containers/CreateSoundboardFormContainer'\r\nimport SoundBoards from '../containers/SoundboardsCarouselContainer/index'\r\nimport Spacing from '../components/Spacing'\r\nimport { GlobalContext } from '../context/globalContext'\r\nimport useUserInfoFromCookie from '../util/useUserInfoFromCookie'\r\nimport { toggleEditingDashboardAction } from '../context/globalActions'\r\n\r\nexport default function Dashboard() {\r\n\tuseUserInfoFromCookie(true)\r\n\r\n\tconst { globalState } = useContext(GlobalContext)\r\n\tif (!globalState?.user) return null\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<article>\r\n\t\t\t\t<Header title=\"Dashboard\" icon=\"👤\" />\r\n\t\t\t\t<section>\r\n\t\t\t\t\t<h1>My Soundboards</h1>\r\n\t\t\t\t\t<SoundBoards />\r\n\t\t\t\t\t<CreateSoundboardFormContainer />\r\n\t\t\t\t</section>\r\n\t\t\t\t<Spacing spaces={5} />\r\n\t\t\t\t<hr />\r\n\t\t\t\t<Spacing spaces={2} />\r\n\t\t\t\t<section>\r\n\t\t\t\t\t<h1>My Sounds</h1>\r\n\t\t\t\t\t{globalState.user.username && (\r\n\t\t\t\t\t\t<SoundCarouselContainer\r\n\t\t\t\t\t\t\tquery={`author=${globalState.user.username}`}\r\n\t\t\t\t\t\t\tshowCreatorActions={globalState.editingDashboard}\r\n\t\t\t\t\t\t\tshowAddToSoundboard={true}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</section>\r\n\t\t\t\t<Spacing spaces={2} />\r\n\t\t\t\t<section>\r\n\t\t\t\t\t<h1>Favorites</h1>\r\n\t\t\t\t\t{globalState.user.soundsFamed.length > 0 && (\r\n\t\t\t\t\t\t<SoundCarouselContainer\r\n\t\t\t\t\t\t\tlist={globalState.user.soundsFamed}\r\n\t\t\t\t\t\t\tshowAddToSoundboard={true}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</section>\r\n\t\t\t\t<Spacing spaces={5} />\r\n\t\t\t\t<hr />\r\n\t\t\t\t<Spacing spaces={5} />\r\n\t\t\t\t<section>\r\n\t\t\t\t\t<h1 id=\"upload\" style={{ textAlign: 'center' }}>\r\n\t\t\t\t\t\tUpload a Sound\r\n\t\t\t\t\t</h1>\r\n\t\t\t\t\t<Spacing spaces={2} />\r\n\t\t\t\t\t<AddSoundForm />\r\n\t\t\t\t</section>\r\n\t\t\t\t<Spacing spaces={2} />\r\n\t\t\t</article>\r\n\t\t\t<EditButton />\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nfunction EditButton() {\r\n\tconst { globalState, dispatch } = useContext(GlobalContext)\r\n\tif (!dispatch || !globalState) return null\r\n\r\n\tconst styles: React.CSSProperties = {\r\n\t\tbottom: '1rem',\r\n\t\tright: '7rem',\r\n\t\tposition: 'fixed',\r\n\t\twidth: '50px',\r\n\t\theight: '50px',\r\n\t\tboxShadow: '0 4px 4px black',\r\n\t\tcolor: 'white',\r\n\t\tbackgroundColor: 'royalblue',\r\n\t\tfontSize: '2rem',\r\n\t\tzIndex: 9999,\r\n\t\tdisplay: 'flex',\r\n\t\tjustifyContent: 'center',\r\n\t}\r\n\r\n\tconst toggleEditMode = () => {\r\n\t\tdispatch(toggleEditingDashboardAction())\r\n\t}\r\n\r\n\treturn (\r\n\t\t<button onClick={toggleEditMode} style={styles}>\r\n\t\t\t<span role=\"img\" aria-label=\"edit\">\r\n\t\t\t\t✏\r\n\t\t\t</span>\r\n\t\t</button>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\n\r\ninterface FameButtonContainerProps {\r\n\tsoundId: string\r\n\tfame: number\r\n}\r\n\r\nexport default function FameButton({\r\n\tsoundId,\r\n\tfame,\r\n}: FameButtonContainerProps) {\r\n\tconst [displayedFame, setDisplayedFame] = useState<number>(fame)\r\n\r\n\tconst toggleFame = async (\r\n\t\tevent: React.MouseEvent<HTMLButtonElement, MouseEvent>\r\n\t) => {\r\n\t\ttry {\r\n\t\t\tconst incrementResponse = await fetch(\r\n\t\t\t\t`/api/sounds/${soundId}/incrementfame`,\r\n\t\t\t\t{\r\n\t\t\t\t\tmethod: 'PUT',\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t\tif (incrementResponse.status === 200)\r\n\t\t\t\tsetDisplayedFame((prevFame) => prevFame + 1)\r\n\t\t\telse {\r\n\t\t\t\tconst decrementResponse = await fetch(\r\n\t\t\t\t\t`/api/sounds/${soundId}/decrementfame`,\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tmethod: 'PUT',\r\n\t\t\t\t\t}\r\n\t\t\t\t)\r\n\t\t\t\tif (decrementResponse.status !== 200) throw new Error()\r\n\t\t\t\tsetDisplayedFame((prevFame) => prevFame - 1)\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(`Failed to change famed status.`)\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<span>{displayedFame}</span>\r\n\t\t\t<button onClick={toggleFame}>\r\n\t\t\t\t<span role=\"img\" aria-label=\"fame\">\r\n\t\t\t\t\t⬆\r\n\t\t\t\t</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useContext } from 'react'\r\nimport { Sound } from '../../util/types/Sound.type'\r\nimport playSound from '../../util/playSound'\r\nimport styles from './Catalog.module.scss'\r\nimport FameButton from '../FameButton/FameButton'\r\nimport AddToSoundboard from '../AddToSoundboard'\r\nimport { GlobalContext } from '../../context/globalContext'\r\n\r\nexport default function Catalog({ sounds }: CatalogProps) {\r\n\tconst { globalState } = useContext(GlobalContext)\r\n\r\n\treturn (\r\n\t\t<section className={styles.section}>\r\n\t\t\t{sounds.length > 0 ? (\r\n\t\t\t\t<ul className={styles.catalog}>\r\n\t\t\t\t\t{sounds.map((sound) => (\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName={styles.item}\r\n\t\t\t\t\t\t\tkey={sound._id}\r\n\t\t\t\t\t\t\tdata-aos=\"zoom-in\"\r\n\t\t\t\t\t\t\tdata-aos-duration={500}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<h2>{sound.name}</h2>\r\n\t\t\t\t\t\t\t<h4>{sound.author}</h4>\r\n\t\t\t\t\t\t\t<p>{sound.description}</p>\r\n\t\t\t\t\t\t\t<p>{sound.category}</p>\r\n\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t{sound.triggers.length ? '👄' : ''}\r\n\t\t\t\t\t\t\t\t{sound.triggers.join(', ')}\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t<p>{new Date(sound.created).toLocaleDateString()}</p>\r\n\t\t\t\t\t\t\t{globalState?.user.username && (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<AddToSoundboard soundId={sound._id} />\r\n\t\t\t\t\t\t\t\t\t<FameButton soundId={sound._id} fame={sound.fame} />\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t<button onClick={() => playSound(sound.sourceId)}>🔊</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</ul>\r\n\t\t\t) : (\r\n\t\t\t\t<h3 className={styles.empty}>\r\n\t\t\t\t\tLooks like there's nothing here... yet!\r\n\t\t\t\t</h3>\r\n\t\t\t)}\r\n\t\t</section>\r\n\t)\r\n}\r\n\r\ninterface CatalogProps {\r\n\tsounds: Sound[]\r\n}\r\n","import React, { useState, useEffect, useContext, useRef } from 'react'\r\nimport Catalog from '../components/Catalog'\r\nimport { Sound } from '../util/types/Sound.type'\r\nimport { GlobalContext } from '../context/globalContext'\r\nimport Spinner from '../components/Spinner'\r\n\r\nexport default function SoundCatalogContainer({\r\n\tquery = '',\r\n}: SoundCatalogContainerProps) {\r\n\tconst [sounds, setSounds] = useState<Sound[]>([])\r\n\tconst { globalState } = useContext(GlobalContext)\r\n\r\n\tconst [count, setCount] = useState<number>(10)\r\n\tconst [start, setStart] = useState<number>(0)\r\n\tconst [moreToLoad, setMoreToLoad] = useState<boolean>(true)\r\n\r\n\tuseEffect(() => {\r\n\t\tconst fetchSounds = async () => {\r\n\t\t\tconst response = await fetch(\r\n\t\t\t\t`/api/sounds?start=${start}&count=${count}&name=${\r\n\t\t\t\t\tquery || globalState?.soundsQuery\r\n\t\t\t\t}`\r\n\t\t\t)\r\n\t\t\tconst data = await response.json()\r\n\r\n\t\t\tif (query || globalState?.soundsQuery) setSounds(data)\r\n\t\t\telse setSounds((prevData) => [...prevData, ...data])\r\n\r\n\t\t\tconst nextResponse = await fetch(\r\n\t\t\t\t`/api/sounds?start=${start + count}&count=${count}&name=${\r\n\t\t\t\t\tquery || globalState?.soundsQuery\r\n\t\t\t\t}`\r\n\t\t\t)\r\n\t\t\tconst nextData = await nextResponse.json()\r\n\r\n\t\t\tif (nextData.length === 0) {\r\n\t\t\t\tsetMoreToLoad(false)\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfetchSounds()\r\n\t}, [query, globalState?.soundsQuery, start])\r\n\r\n\tuseEffect(() => {\r\n\t\tsetStart(0)\r\n\t\tsetMoreToLoad(true)\r\n\t}, [globalState?.soundsQuery])\r\n\r\n\tconst loadMore = () => {\r\n\t\tsetStart(() => start + count)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Catalog sounds={sounds} />\r\n\t\t\t{sounds.length > 0 && moreToLoad && (\r\n\t\t\t\t<button\r\n\t\t\t\t\tonClick={loadMore}\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\twidth: '100%',\r\n\t\t\t\t\t\tbackgroundColor: '#222',\r\n\t\t\t\t\t\tcolor: 'white',\r\n\t\t\t\t\t\theight: '50px',\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\tLoad More\r\n\t\t\t\t</button>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\ninterface SoundCatalogContainerProps {\r\n\tquery?: string\r\n}\r\n","import React from 'react'\r\nimport Header from '../components/Header'\r\nimport SearchBar from '../components/SearchBar'\r\nimport SoundCatalogContainer from '../containers/SoundCatalogContainer'\r\nimport useUserInfoFromCookie from '../util/useUserInfoFromCookie'\r\n\r\nexport default function SoundsCatalog() {\r\n\tuseUserInfoFromCookie()\r\n\r\n\treturn (\r\n\t\t<article>\r\n\t\t\t<Header title=\"Catalog\" icon=\"📇\" />\r\n\t\t\t<main>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tposition: 'sticky',\r\n\t\t\t\t\t\t\ttop: 0,\r\n\t\t\t\t\t\t\tbackgroundColor: '#fcfcfc',\r\n\t\t\t\t\t\t\tpadding: '1rem',\r\n\t\t\t\t\t\t\tboxShadow: '0 16px 8px rgba(0,0,0,0.5)',\r\n\t\t\t\t\t\t\tborderRadius: '0 0 4px 4px',\r\n\t\t\t\t\t\t\tzIndex: 99,\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tid=\"TheWholeLot\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<h1 style={{ textAlign: 'center' }}>The Whole Lot</h1>\r\n\t\t\t\t\t\t<SearchBar />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<SoundCatalogContainer />\r\n\t\t\t\t</div>\r\n\t\t\t</main>\r\n\t\t</article>\r\n\t)\r\n}\r\n","import React, { useEffect, useState, useContext, useRef } from 'react'\r\nimport { GlobalContext } from '../../context/globalContext'\r\nimport styles from './Soundplayer.module.scss'\r\n\r\nexport default function SoundPlayer() {\r\n\tconst { globalState, dispatch } = useContext(GlobalContext)\r\n\tconst [triggers, setTriggers] = useState<string[]>([])\r\n\tconst [recognition, setRecognition] = useState<SpeechRecognition>()\r\n\tconst [listening, setListening] = useState<boolean>(false)\r\n\tconst buttonRef = useRef<HTMLButtonElement | null>(null)\r\n\r\n\tuseEffect(() => {\r\n\t\tsetRecognition(() => {\r\n\t\t\tconst SpeechRecognition =\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\twindow.SpeechRecognition || window.webkitSpeechRecognition\r\n\t\t\tconst rec = new SpeechRecognition()\r\n\t\t\trec.continuous = true\r\n\t\t\trec.onstart = () => {\r\n\t\t\t\tconsole.log('start')\r\n\t\t\t}\r\n\t\t\trec.onend = () => {\r\n\t\t\t\tconsole.log('end')\r\n\t\t\t}\r\n\r\n\t\t\treturn rec\r\n\t\t})\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!recognition) return\r\n\t\trecognition.abort()\r\n\r\n\t\tif (listening) recognition.start()\r\n\t}, [listening])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!recognition) return\r\n\r\n\t\tif (!globalState) return\r\n\t\tsetTriggers(() => {\r\n\t\t\tlet triggers: string[] = []\r\n\t\t\tif (globalState.soundsToLivePlay.length > 0) {\r\n\t\t\t\ttriggers = globalState.soundsToLivePlay\r\n\t\t\t\t\t.map((sound) => sound.triggers)\r\n\t\t\t\t\t.flat(Infinity)\r\n\t\t\t\ttriggers = triggers.map((triggerWord) => triggerWord.toUpperCase())\r\n\t\t\t}\r\n\r\n\t\t\trecognition.onresult = (ev: SpeechRecognitionEvent) => {\r\n\t\t\t\tif (triggers.length === 0) return\r\n\t\t\t\tconst result = ev.results[ev.results.length - 1][0].transcript\r\n\t\t\t\tconsole.log(result)\r\n\r\n\t\t\t\tconst triggerWordsRegex = new RegExp(`(${triggers.join('|')})`, 'i')\r\n\r\n\t\t\t\tresult.split(' ').forEach(async (word) => {\r\n\t\t\t\t\tword = word.toUpperCase()\r\n\r\n\t\t\t\t\tif (triggerWordsRegex.test(word)) {\r\n\t\t\t\t\t\tconst soundToPlay = globalState.soundsToLivePlay.find((sound) => {\r\n\t\t\t\t\t\t\tconst triggers = sound.triggers.map((triggerWord) =>\r\n\t\t\t\t\t\t\t\ttriggerWord.toUpperCase()\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\treturn triggers.includes(word)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tif (!soundToPlay) return\r\n\r\n\t\t\t\t\t\tconst response = await fetch(\r\n\t\t\t\t\t\t\t`/api/sounds/uploads/${soundToPlay.sourceId}`\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\tconst data = await response.blob()\r\n\r\n\t\t\t\t\t\tconst reader = new FileReader()\r\n\r\n\t\t\t\t\t\treader.onloadend = () => {\r\n\t\t\t\t\t\t\tif (!reader.result) return\r\n\t\t\t\t\t\t\tconst dataUrl = reader.result.toString()\r\n\t\t\t\t\t\t\tnew Audio(dataUrl).play()\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treader.readAsDataURL(data)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\treturn triggers\r\n\t\t})\r\n\t}, [globalState?.soundsToLivePlay])\r\n\r\n\treturn (\r\n\t\t<div className={styles.soundplayer}>\r\n\t\t\t<button\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tsetListening((prevState) => {\r\n\t\t\t\t\t\tif (!buttonRef.current) return !prevState\r\n\t\t\t\t\t\tif (prevState === false)\r\n\t\t\t\t\t\t\tbuttonRef.current.style.filter =\r\n\t\t\t\t\t\t\t\t'hue-rotate(150deg) brightness(180%)'\r\n\t\t\t\t\t\telse buttonRef.current.style.filter = 'none'\r\n\t\t\t\t\t\treturn !prevState\r\n\t\t\t\t\t})\r\n\t\t\t\t}}\r\n\t\t\t\tref={buttonRef}\r\n\t\t\t>\r\n\t\t\t\t<span role=\"img\" aria-label=\"live play\">\r\n\t\t\t\t\t🔴\r\n\t\t\t\t</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useReducer, useEffect } from 'react'\r\nimport { GlobalContext } from './context/globalContext'\r\nimport {\r\n\tGlobalState,\r\n\tglobalStateReducer,\r\n\tinitialGlobalState,\r\n} from './context/globalReducer'\r\nimport { GlobalStateAction } from './context/globalActions'\r\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom'\r\nimport AOS, { AosOptions } from 'aos'\r\nimport 'aos/dist/aos.css'\r\nimport 'swiper/css/swiper.min.css'\r\nimport './main.scss'\r\nimport Home from './pages/Home'\r\nimport Login from './pages/Login'\r\nimport Register from './pages/Register'\r\nimport Dashboard from './pages/Dashboard'\r\nimport SoundsCatalog from './pages/SoundsCatalog'\r\nimport SoundPlayer from './components/SoundPlayer'\r\nimport firebaseApp from './firebase' /* private; exported firebase app using credentials */\r\n\r\n/* export firebase auth app */\r\nexport const auth = firebaseApp.auth()\r\n\r\nexport default function App() {\r\n\tconst [globalState, dispatch] = useReducer<\r\n\t\tReact.Reducer<GlobalState, GlobalStateAction>\r\n\t>(globalStateReducer, initialGlobalState)\r\n\r\n\tuseEffect(() => {\r\n\t\tconst options: AosOptions = {\r\n\t\t\tonce: true,\r\n\t\t\tduration: 800,\r\n\t\t\teasing: 'ease-out',\r\n\t\t}\r\n\t\tAOS.init(options)\r\n\t}, [])\r\n\r\n\treturn (\r\n\t\t<GlobalContext.Provider value={{ globalState, dispatch }}>\r\n\t\t\t<SoundPlayer />\r\n\t\t\t<Router>\r\n\t\t\t\t<Switch>\r\n\t\t\t\t\t<Route exact path=\"/\" render={() => <Home />} />\r\n\t\t\t\t\t<Route path=\"/catalog\" render={() => <SoundsCatalog />} />\r\n\t\t\t\t\t<Route path=\"/dashboard\" render={() => <Dashboard />} />\r\n\t\t\t\t\t<Route path=\"/login\" render={() => <Login />} />\r\n\t\t\t\t\t<Route path=\"/register\" render={() => <Register />} />\r\n\t\t\t\t\t<Route path=\"/*\" render={() => <div>404</div>} />\r\n\t\t\t\t</Switch>\r\n\t\t\t</Router>\r\n\t\t</GlobalContext.Provider>\r\n\t)\r\n}\r\n","import firebase from 'firebase'\r\n\r\n/* export firebase auth app */\r\nconst firebaseApp = firebase.initializeApp({\r\n\tapiKey: 'AIzaSyARhiq8bCSDSXEcl3RLHtC2uQbprI6U854',\r\n\tauthDomain: 'soundbird-63117.firebaseapp.com',\r\n\tdatabaseURL: 'https://soundbird-63117.firebaseio.com',\r\n\tprojectId: 'soundbird-63117',\r\n\tstorageBucket: 'soundbird-63117.appspot.com',\r\n\tmessagingSenderId: '263610642754',\r\n\tappId: '1:263610642754:web:04c694294a4ad2d4cb98db',\r\n})\r\n\r\nexport default firebaseApp\r\n","import React from 'react'\r\nimport { render } from 'react-dom'\r\nimport App from './App'\r\n\r\n\r\nrender(<App />, document.querySelector('#root'))\r\n"],"sourceRoot":""}